function metaleffect(t,e,a,i,r,o,n,l,s,d,c,u,p,h){if("function"==typeof metaleffect_Override)return metaleffect_Override(t,e,a,i,r,o,n,l,s,d,c,u,p,h);console.log(n);var g=[],f=((h=h||!1)?(g.effect="",g.fill=t+" ;stroke: "+a+"; stroke-width:0.8",g.fillShadow="",g.fillLight=""):(g.effect='<linearGradient class="svggradient" data-group-text="'+o+'"  id="metalEffect_'+o+'" x1="0%" y1="100%" y2="10%" x2="80%">',g.effect+='<stop stop-color="'+t+'" offset="0%"></stop>',g.effect+='<stop stop-color="'+e+'" offset="30%"></stop>',g.effect+='<stop stop-color="'+t+'" offset="70%"></stop>',g.effect+='<stop stop-color="'+e+'" offset="100%"></stop>',g.effect+="</linearGradient>",g.effect+='<filter class="svgfilter" data-group-text="'+o+'" id="shadow_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feGaussianBlur result="shadow" stdDeviation="1 0.5"></feGaussianBlur><feOffset dx="0" dy="2"></feOffset></filter>',g.effect+='<filter class="svgfilter" data-group-text="'+o+'"  id="shadow2_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0.2 0.2"></feGaussianBlur><feOffset dx="0" dy="-0.7"></feOffset></filter>',g.effect+='<filter class="svgfilter" data-group-text="'+o+'" id="light_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feOffset dy="-1" dx="0"></feOffset></filter>',g.fill=(p?"url(#texture_"+o+")":"url(#metalEffect_"+o+")")+" ;stroke: "+a+"; stroke-width:0.8",g.fillShadow=i+"; filter: url(#shadow_"+o+")",g.fillLight=r+"; filter: url(#light_"+o+")"),textPathEffect="",svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" class="textareaSvg composition_element" viewBox="0 0 '+l+" "+(s+5)+'" preserveAspectRatio="xMidYMid meet" style="'+style+'" height="'+s+'" width="'+l+'">',svg+=g.effect,fontUrl=(fontUrl=(fontUrl=d.replace(/\s/g,"+")).replace(/\"/g,"")).replace(/\'/g,""),fullFontUrl="https://fonts.googleapis.com/css?family="+fontUrl,styleContent="@import url('"+fullFontUrl+"')",svg+='<defs><style type="text/css" >'+styleContent+"</style></defs>",textPathEffect+=g.effect,n.split("\n"));if(1<f.length){y=1;for(var m=0;m<f.length;m++)svglines+="<tspan "+txtanchord+' x="'+x+'" y="'+c*y+'">'+f[m].escape()+"</tspan>",y++}return 1!=u||h?p&&(svg=(svg+='<pattern id="texture_'+o+'" patternUnits="userSpaceOnUse" viewBox="0 0 '+l+" "+(s+5)+'" height="'+s+'" width="'+l+'">')+'<image xlink:href="'+p+'" height="'+s+'" width="'+l+'"/></pattern>'):(svg=(svg+='<text data-font-family="'+d+'" id="svgText_'+o+'-light" x="10" y="10" style="fill:'+g.fillLight+';"font-family:'+d+" ;>"+svglines+"</text>")+'<text data-font-family="'+d+'" id="svgText_'+o+'-shadow" x="10" y="10" style="fill:'+g.fillShadow+";font-family:"+d+' ;">'+n+"</text>",textPathEffect=(textPathEffect+='<text data-font-family="'+d+'" data-group-text="'+o+'" id="svgText_'+o+'-light" style="font-family:'+d+" ;font-size:"+ +c+"px; fill:"+g.fillLight+';">'+svglines+"</text>")+'<text data-font-family="'+d+'" data-group-text="'+o+'" id="svgText_'+o+'-shadow" style="font-family:'+d+" ;font-size:"+ +c+"px; fill:"+g.fillShadow+';">'+svglines+"</text>"),svg=(svg=(svg+='<text data-font-family="'+d+'" id="svgText_'+o+'"  x="10" y="10" style="fill:'+g.fill+";font-family:"+d+';">')+svglines)+"</text>"+"</svg>",g.textPathEffect=textPathEffect,g.svg=svg,g}$(document).on("click",".addText",function(t){t.preventDefault(),maxlenght=$(this).attr("data-max"),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),blend=$(this).attr("data-blend"),ppcprice=$(this).attr("data-ppcprice"),others=$(this).parent().find(".designer-item"),number=others.length+1,$(this).parent().find(".designer-item").slideUp(),textItem='<div class="designer-item-container"><h4 data-target="#item-'+group+"-"+parseInt(number)+'" id="toggler-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerTextText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'"><textarea id="text-item-'+group+"-"+number+'" data-lines="1" data-max="'+maxlenght+'" data-group="'+group+'" data-number="'+number+'" data-zindex="'+zindex+'" data-id="'+target+'" data-view="'+view+'" data-dragdrop="'+dragdrop+'" data-resizeable="'+resizeable+'" data-rotateable="'+rotateable+'" data-price="'+price+'" data-blend="'+blend+'" data-ppcprice="'+ppcprice+'" data-pattern="" class="form-control textzone ndktextarea textItem"></textarea>',0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),textItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),textItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small" data-group-target="'+group+"-"+parseInt(number)+'" data-group="'+group+'"><span>'+designerRemoveText+"</span></a></div></div>",textItem=$(this).parent().find(".itemsBlock").append(textItem),scrollToNdk(textItem,800),initText($("#text-item-"+group+"-"+number)),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),makeSortable()}),$(document).on("click",".addTextArea",function(t){t.preventDefault(),maxlenght=$(this).attr("data-max"),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),ppcprice=$(this).attr("data-ppcprice"),blend=$(this).attr("data-blend"),others=$(this).parent().find(".designer-item"),number=others.length+1,$(this).parent().find(".designer-item").slideUp(),textItem='<div class="designer-item-container"><h4 data-target="#item-'+group+"-"+parseInt(number)+'" id="toggler-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerTextText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'"><textarea id="text-item-'+group+"-"+number+'" data-lines="1" data-max="'+maxlenght+'" data-group="'+group+'" data-number="'+number+'" data-zindex="'+zindex+'" data-id="'+target+'" data-view="'+view+'" data-dragdrop="'+dragdrop+'" data-resizeable="'+resizeable+'" data-rotateable="'+rotateable+'" data-price="'+price+'" data-ppcprice="'+ppcprice+'" data-blend="'+blend+'" data-pattern="" class="form-control textzone ndktextarea type_textarea textItem"></textarea>',0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),textItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),textItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small" data-group="'+group+'" data-group-target="'+group+"-"+parseInt(number)+'"><span>'+designerRemoveText+"</span></a></div></div>",textItem=$(this).parent().find(".itemsBlock").append(textItem),scrollToNdk(textItem,800),initText($("#text-item-"+group+"-"+number)),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),makeSortable()}),$(document).on("click",".addImg",function(t){t.preventDefault(),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),blend=$(this).attr("data-blend"),others=$(this).parent().find(".designer-item"),number=others.length+1,(clonedUpload=$(this).parent().find(".ndkhiddenuploadfile").clone()).removeClass("ndkhiddenuploadfile").addClass("imgItem"),clonedUpload.find(".img-value").attr("data-group",group+"-"+number),(clonedLibrary=$(this).parent().find(".ndkhiddenimglibrary").clone()).removeClass("ndkhiddenimglibrary").addClass("imgItem").attr("id","main-"+group+"-"+number),clonedLibrary.find(".img-value").attr("data-group",group+"-"+number),$(this).parent().find(".designer-item").slideUp(),imgItem='<div class="designer-item-container"><h4 id="toggler-'+group+"-"+parseInt(number)+'"  data-target="#item-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerImgText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'">'+clonedUpload.html()+clonedLibrary.html(),0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),imgItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),imgItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small"  data-group="'+group+'" data-group-target="'+group+"-"+parseInt(number)+'"><span>'+designerRemoveText+"</span></a></div></div>",imgItem=$(this).parent().find(".itemsBlock").append(imgItem),scrollToNdk(imgItem,800),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),$(".ndk_selector").each(function(){$(this).setNdkSelector()}),makeSortable()}),$(document).on("click",".itemToggler",function(){$($(this).attr("data-target")).slideToggle()}),String.prototype.escape=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(t){return e[t]||t})},$(document).on("click",".submitTextItem",function(){if(group=parseInt($(this).parent().parent().find(".ndktextarea:eq(0)").attr("data-group")),number=$(this).parent().parent().find(".ndktextarea").attr("data-number"),zindex=$(this).parent().parent().find(".textzone").attr("data-zindex"),price=$(this).parent().parent().find(".ndktextarea").attr("data-price"),ppcprice=$(this).parent().parent().find(".ndktextarea").attr("data-ppcprice"),blend=$(this).parent().parent().find(".ndktextarea").attr("data-blend"),view=$(this).parent().parent().find(".ndktextarea").attr("data-view"),dragdrop=$(this).parent().parent().find(".ndktextarea").attr("data-dragdrop"),resizeable=$(this).parent().parent().find(".ndktextarea").attr("data-resizeable"),rotateable=$(this).parent().parent().find(".ndktextarea").attr("data-rotateable"),(charsCount=0)<$(this).parent().find(".noborder").length?(texte="",$(this).parent().find(".noborder").each(function(){""!=$(this).val()&&(texte+=$(this).val()+" ",charsCount+=$(this).val().replace(/\ /g,"").length)})):texte=$(this).parent().find(".textarea").text(),""==texte||" "==texte?(price=0,texte=""):price=0<ppcprice?ppcprice*charsCount:$(this).parent().parent().find(".ndktextarea").attr("data-price"),$(this).parent().parent().find(".ndktextarea").val(texte).trigger("keyup"),$(this).parent().find(".textarea").css({width:"auto",height:"auto",display:"table"}),""!=texte&&" "!=texte||(price=0,texte=""),verticalPadding=10,horizontalPadding=0,$(this).parent().find(".status_counter").hide(),height=$(this).parent().find(".textarea").innerHeight()-parseFloat(verticalPadding),width=$(this).parent().find(".textarea").innerWidth()-parseFloat(horizontalPadding)-scrollbarWidth,$(".status_counter").hide(),0<$(".zone_limit[data-group='"+group+"']").length&&0<$(".view_tab[data-view='"+view+"']").length&&0<$(this).parent().find("textarea.noborder").length&&(container=".zone_limit[data-group='"+group+"']",zwidth=$(container).width(),zheight=$(container).height(),$(this).parent().find(".textarea").css({width:zwidth}),width=zwidth),svglines="",fontSize=parseFloat($(this).parent().css("font-size")),alignment=$(this).parent().find(".texteditor").css("text-align"),x=10,txtanchord='text-anchor="start"',"left"==alignment?(x=10,txtanchord='text-anchor="start"'):"center"==alignment?(x=width/2,txtanchord='text-anchor="middle"'):"right"==alignment&&(x=width,txtanchord='text-anchor="end"'),0<$(this).parent().find("textarea.noborder").length){var t=$(this).parent().find("textarea.noborder").val().split("\n");y=1;for(var e=0;e<t.length;e++)svglines+="<tspan "+txtanchord+' x="'+x+'" y="'+fontSize*y+'">'+t[e].escape()+"</tspan>",y++;textToWrite=$(this).parent().find("textarea.noborder").val()}else textToWrite="",y=1,$(this).parent().find(".noborder").each(function(){textToWrite+=$(this).val()+" \n ",y++});style=$(this).parent().attr("style").replace('"',"'").replace('"',"'");var a=!1,i=[];i.effect="",i.fill="",i.fillLight="",i.fillShadow="",fontFamily=(fontFamily=$(this).parent().find(".texteditor").css("font-family")).replace('"',"'").replace('"',"'"),i="rgb(255, 215, 0)"==$(this).parent().find(".texteditor").css("color")?(a=!0,metaleffect("#efd8a2","#a28156","#efd8a2","#2f1f05","#fff3c6",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"rgb(192, 192, 192)"==$(this).parent().find(".texteditor").css("color")?(a=!0,metaleffect("#888888","#dedede","#F5F5F5","#444444","#dedede",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"concavMe"==$(this).parent().find(".texteditor").attr("data-effect")?(color1=$(this).parent().find(".texteditor").css("color"),color2=darkerColor($(this).parent().find(".texteditor").css("color"),.2),shadowcolor=darkerColor($(this).parent().find(".texteditor").css("color"),.4),lightcolor=lighterColor($(this).parent().find(".texteditor").css("color"),.2),strokecolor=darkerColor($(this).parent().find(".texteditor").css("color"),.2),a=!0,metaleffect(color2,color1,strokecolor,lightcolor,shadowcolor,group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"convexMe"==$(this).parent().find(".texteditor").attr("data-effect")?(color1=$(this).parent().find(".texteditor").css("color"),color2=lighterColor($(this).parent().find(".texteditor").css("color"),.2),shadowcolor=darkerColor($(this).parent().find(".texteditor").css("color"),.2),lightcolor=lighterColor($(this).parent().find(".texteditor").css("color"),.3),strokecolor=lighterColor($(this).parent().find(".texteditor").css("color"),.2),a=!0,metaleffect(color1,color2,strokecolor,shadowcolor,lightcolor,group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):(color1=$(this).parent().find(".texteditor").css("color"),strokecolor=$(this).parent().find(".texteditor").attr("stroke-color"),a=!1,metaleffect(color1,color1,strokecolor,"transparent","transparent",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1,!0)),designCompo(i.svg,group+"-"+number,view,zindex,dragdrop,resizeable,rotateable,width,height,"svg",blend),0<$(this).parent().find("textarea.noborder").length&&(svg_textMultiline("svgText_"+group+"-"+number,textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x),svg_textMultiline("svgText_"+group+"-"+number+"-shadow",textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x),svg_textMultiline("svgText_"+group+"-"+number+"-light",textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x)),""!=textToWrite&&updatePriceNdk(price,parseInt(group))}),$(document).on("click",".remove-item-block",function(t){t.preventDefault(),group=$(this).attr("data-group-target"),others=$(this).parent().parent().find(".designer-item"),$("#visual_"+group).remove(),$("#item-"+group).remove(),$("#toggler-"+group).remove(),$("#layer-edit-"+group).remove(),idInput=group.split("-"),1<others.length?$("#ndkcsfield_"+idInput[0]).val(designerValue).trigger("keyup"):($("#ndkcsfield_"+idInput[0]).val("").trigger("keyup"),updatePriceNdk(0,$(this).attr("data-group"))),$(this).hide(),rootGroupBlock=$(".form-group[data-field='"+group+"']:not(.submitContainer)"),$("#ndkcsfield_"+idInput[0]).trigger("keyup"),checkLayerChanges(),makeSortable()}),$(document).on("click",".remove-img-item",function(t){t.preventDefault(),group=$(this).attr("data-group-target"),others=$(this).parent().parent().find(".designer-item"),$("#visual_"+group).remove(),$("#layer-edit-"+group).remove(),$(this).parent().find(".selected-value").removeClass("selected-value"),idInput=group,$("#ndkcsfield_"+idInput[0]).val("").trigger("keyup"),$(this).hide(),$(this).hasClass("removePrice")&&($("#ndkcsfield_"+group).val(""),updatePriceNdk(0,group)),checkLayerChanges(),makeSortable()});var pad=function(t,e){for(t+="";t.length<e;)t="0"+t;return t},changeColor=function(t,e,a){t=(t=t.replace(/^\s*|\s*$/,"")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var e=Math.round(256*e)*(a?-1:1),i=t.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=i&&null!=i[4]?i[4]:null,t=i?[i[1],i[2],i[3]]:t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/);return i?"rgb"+(null!==r?"a":"")+"("+Math[a?"max":"min"](parseInt(t[0],10)+e,a?0:255)+", "+Math[a?"max":"min"](parseInt(t[1],10)+e,a?0:255)+", "+Math[a?"max":"min"](parseInt(t[2],10)+e,a?0:255)+(null!==r?", "+r:"")+")":["#",pad(Math[a?"max":"min"](parseInt(t[0],10)+e,a?0:255).toString(16),2),pad(Math[a?"max":"min"](parseInt(t[1],10)+e,a?0:255).toString(16),2),pad(Math[a?"max":"min"](parseInt(t[2],10)+e,a?0:255).toString(16),2)].join("")},lighterColor=function(t,e){return changeColor(t,e,!1)},darkerColor=function(t,e){return changeColor(t,e,!0)};function setLetterWidth(){if("function"==typeof setLetterWidth_Override)return setLetterWidth_Override();$(".customFontLetter").each(function(){parentWidth=$(this).parent().width(),elWidth=$(this).width(),$(this).width(elWidth/parentWidth*100+"%")}),equalheight(".customFontLetter")}function convertPercentEl(t){if("function"==typeof convertPercentEl_Override)return convertPercentEl_Override(t);container=t.parent(),containerWidth=container.width(),containerHeight=container.height(),elWidth=t.width(),elHeight=t.height(),elLeft=t.css("left").replace("px",""),elTop=t.css("top").replace("px",""),widthPercent=elWidth/containerWidth*100+"%",elHeight,containerHeight,heightPercent="auto",leftPercent=elLeft/containerWidth*100+"%",topPercent=elTop/containerHeight*100+"%",t.css({width:widthPercent,height:heightPercent,left:leftPercent,top:topPercent,margin:""})}function registerInitialValues(){if("function"==typeof registerInitialValues_Override)return registerInitialValues_Override();$('.fieldPane > [id^="main-"]').each(function(){splittedGroup=$(this).attr("id").split("-"),group=splittedGroup[1]+(void 0!==splittedGroup[2]?"-"+splittedGroup[2]:""),initialValues[group]=[],0<$(this).find(".img-item-row").length&&initialValues[group].push($(this).find(".img-item-row")),0<$(this).find(".color-ndk").length&&initialValues[group].push($(this).find(".color-ndk")),0<$(this).find(".ndk-select").length&&initialValues[group].push($(this).find(".ndk-select")),0<$(this).find(".ndk-radio").length&&initialValues[group].push($(this).find(".ndk-radio")),0<$(this).find(".ndk-checkbox").length&&initialValues[group].push($(this).find(".ndk-checkbox"))})}function loadInitialValues(){if("function"==typeof loadInitialValues_Override)return loadInitialValues_Override();for(idGroup in initialValues)if(void 0!==initialValues[idGroup]&&void 0!==initialValues[idGroup][0])for(var t=0;t<initialValues[idGroup][0].length;t++)element=initialValues[idGroup][0][t],container=$(".form-group[data-field='"+idGroup+"']"),$(element).hasClass("img-item-row")?0!=(idValue=$(element).find(".img-value:eq(0)").attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .img-value[data-id-value='"+idValue+"']").length&&($(element).removeClass("selected-value"),$(element).find(".img-value").removeClass("selected-value"),$(element).find(".svg-container").removeClass("selected-svg"),$(".form-group[data-field='"+idGroup+"'] .img-value").last().parent().after($(element)[0].outerHTML)):$(element).hasClass("color-ndk")?0!=(idValue=$(element).attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .color-ndk[data-id-value='"+idValue+"']").length&&($(element).removeClass("selected-color"),$(".form-group[data-field='"+idGroup+"'] .color-ndk").last().after($(element)[0].outerHTML)):$(element).is("select")&&$(element).find("option").each(function(){option=$(this),0!=(idValue=$(option).attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .ndk-select > option[data-id-value='"+idValue+"']").length&&$(".form-group[data-field='"+idGroup+"'] select").append($(option)[0].outerHTML)});setTimeout(function(){equalheight(".img-item-row")},1e3)}function makeGroupFieldsSlide(){if("function"==typeof makeGroupFieldsSlide_Override)return makeGroupFieldsSlide_Override();$(".groupFieldBlock").addClass("sliderBlock"),$(".groupFieldBlock > .form-group").addClass("ndkackFieldItem"),setTimeout(function(){ndkCfShowSlide($(".sliderBlock .ndkackFieldItem:visible:eq(0)"))},500),$(".sliderBlock").each(function(){0<(allItems=$(this).find(".ndkackFieldItem")).length?1<allItems.length&&(pager='<p class="ndkcfPager">',allItems.each(function(){pager+='<span data-view="'+$(this).attr("data-view")+'" target="'+$(this).attr("data-iteration")+'" class="ndkcfPagerItem"></span>'}),pager+="</p>",$(".ndkcfPager").remove(),$(this).append(pager).addClass("multipleSlides")):$(this).remove()}),$(".groupFieldBlock").css("padding-bottom",$(".sliderBlock .ndkackFieldItem:visible:eq(0)").innerHeight()),$(".groupFieldBlock.sliderBlock").find(".ndkcfnav").remove(),$(".groupFieldBlock.sliderBlock.multipleSlides").append('<p class="ndkcfnav"><a class="prevNdkcfItem">&nbsp;</a> <a class="nextNdkcfItem">&nbsp;</a></p>'),$(document).on("click",".nextNdkcfItem",function(){found=!1,current=$(this).parent().parent().find(".ndkackFieldItem.activeItem:eq(0)"),(others=$(this).parent().parent().find(".ndkackFieldItem:visible:not(.activeItem)")).each(function(){parseFloat($(this).attr("data-iteration"))>parseFloat(current.attr("data-iteration"))&&!found&&(ndkCfShowSlide($(this),"rtl"),found=!0)}),found||(ndkCfShowSlide(others.first(),"rtl"),found=!0)}),$(document).on("click",".prevNdkcfItem",function(){current=$(this).parent().parent().find(".ndkackFieldItem.activeItem:eq(0)"),others=$(this).parent().parent().find(".ndkackFieldItem:visible:not(.activeItem)"),bigger=-1,others.each(function(){parseFloat($(this).attr("data-iteration"))<parseFloat(current.attr("data-iteration"))&&parseFloat($(this).attr("data-iteration"))>bigger&&(bigger=parseFloat($(this).attr("data-iteration")),target=$(this))}),"undefined"!=typeof target?ndkCfShowSlide(target,"ltr"):ndkCfShowSlide(others.last(),"ltr")}),$(document).on("click",".ndkcfPagerItem",function(){ndkCfShowSlide($(this).parent().parent().find(".ndkackFieldItem[data-iteration='"+$(this).attr("target")+"']"))}),$(".sliderBlock00").swipe({swipe:function(t,e,a,i,r,o){"left"==e?$(this).find(".nextNdkcfItem").trigger("click"):"right"==e&&$(this).find(".prevNdkcfItem").trigger("click")},threshold:0}),$(".sliderBlock .ndkackFieldItem").resize(function(){$(this).parent().css("padding-bottom",$(".ndkackFieldItem.activeItem:eq(0)").innerHeight())})}function ndkCfShowSlide(t,e){if("function"==typeof ndkCfShowSlide_Override)return ndkCfShowSlide_Override(t,e);e=e||"ltr",$(".img-item-row").css("height",""),t.parent().find(".ndkackFieldItem").removeClass("activeItem"),t.parent().find(".ndkackFieldItem").removeClass("slideInRight").removeClass("slideInLeft"),"rtl"==e?t.parent().find(".ndkackFieldItem").addClass("slideInRight").removeClass("slideInLeft"):t.parent().find(".ndkackFieldItem").removeClass("slideInRight").addClass("slideInLeft"),t.addClass("activeItem"),t.parent().find(".ndkcfPagerItem").removeClass("activePager"),t.parent().find(".ndkcfPagerItem[target='"+t.attr("data-iteration")+"']").addClass("activePager"),setTimeout(function(){equalheight(".img-item-row"),t.parent().css("padding-bottom",$(".ndkackFieldItem.activeItem:eq(0)").innerHeight()),t.parent().find(".ndkackFieldItem").removeClass("slideInRight").removeClass("slideInLeft")},500)}function checkLayerChanges(){if("function"==typeof checkLayerChanges_Override)return checkLayerChanges_Override();0==$("#layer-block").find(".editThisLayer").length?$("#layer-block").hide():1==$("#layer-block").find(".editThisLayer").length&&0==$("#layer-block").find(".layer_title").length?$("#layer-block").show().prepend('<p class="layer_title">'+selectLayer+"</p>"):0<$("#layer-block").find(".editThisLayer").length&&$("#layer-block").show()}function makeSortable(){if("function"==typeof makeSortable_Override)return makeSortable_Override();$(".itemsBlock").sortable({items:".designer-item-container",handle:".itemToggler",cursor:"move",opacity:.6,start:function(t,e){$(".resetZones").trigger("click")},stop:function(t,e){refZindex=e.item.parent().parent().parent().find("button:eq(0)").attr("data-zindex"),(others=e.item.parent().find(".designer-item-container")).each(function(){$(this).attr("addzindex",$(others).index($(this))),block=$(this).find(".designer-item"),target_key=block.attr("id").replace("item-",""),(target=$("#visual_"+target_key)).css("z-index",refZindex+$(others).index($(this)))})}})}function RemoveSelectOptions(t,e){var a;inputa=$("li[data-id-value='"+t+"']").find(".ndk-accessory-quantity:eq(0)"),0!=parseInt(inputa.val())&&($("li[data-id-value='"+t+"']").removeClass("selected-accessory"),inputa.val(0).trigger("change"),t=$("#ndk-accessory-quantity-"+t).attr("data-price"),a=$("#price_"+e).val(),$("#price_"+e).val(parseInt(a)-parseInt(t)))}function checaSeImgExiste(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status}function makeSocialCompo(t,e){if("function"==typeof makeSocialCompo_Override)return makeSocialCompo_Override(t,e);1==showSocialTools&&($.prototype.fancybox&&e?(data=$(".ndkShareCompo").html(),$.fancybox.open([{type:"inline",autoScale:!1,minHeight:30,width:"80%",height:"80%",showCloseButton:!1,autoDimensions:!1,content:'<div class="popupSocialContainer clear clearfix">'+data+"</div>",beforeShow:function(){setSharedButtons(t)}}],{padding:0})):setSharedButtons(t))}function setSharedButtons(t){if("function"==typeof setSharedButtons_Override)return setSharedButtons_Override(t);sharing_url=addParameterToURL("id_ndk_customization_field_configuration="+t,sharing_url=removeParamUrl("id_ndk_customization_field_configuration",window.location.href)),sharing_url=addParameterToURL("date="+$.now(),sharing_url),sharing_name="",img_url=$(".current_config_img").attr("src"),$(".copyLinkInput").text(sharing_url),""!=img_url?$(".shareImgDl").attr("href",img_url).show():$(".shareImgDl").hide(),$.ajax({async:!0,type:"GET",global:!1,dataType:"html",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_conf:t,action:"getConfImage"},success:function(t){var e=$("#image-url-0").val();$(".current_config_img:eq(0)").attr("src",e).show(),$("button.ndk-social-sharing:not(.shareImgDl), button.social-sharing").on("click",function(){if((type=$(this).attr("data-type")).length)switch(type){case"twitter":window.open("https://twitter.com/intent/tweet?text="+sharing_name+" "+encodeURIComponent(sharing_url),"sharertwt","toolbar=0,status=0,width=640,height=445");break;case"facebook":window.open("http://www.facebook.com/sharer.php?u="+sharing_url,"sharer","toolbar=0,status=0,width=660,height=445");break;case"google-plus":window.open("https://plus.google.com/share?url="+sharing_url,"sharer","toolbar=0,status=0,width=660,height=445");break;case"pinterest":window.open("http://www.pinterest.com/pin/create/button/?media="+e+"&url="+sharing_url,"sharerpinterest","toolbar=0,status=0,width=660,height=445");break;case"copyLink":copyToClipboard(".copyLinkInput:eq(0)")}})}})}function copyToClipboard(t){var e=$("<input>");$("body").append(e),e.val($(t).text()).select(),document.execCommand("copy"),e.remove()}function addParameterToURL(t,e){return _url=e,_url+=(-1!==_url.indexOf("?")?"&":"?")+t}function removeParamUrl(t,e){var a=e.split("?")[0],i=[],e=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==e){for(var r=(i=e.split("&")).length-1;0<=r;--r)i[r].split("=")[0]===t&&i.splice(r,1);a+=0<i.lenght?"?"+i.join("&"):""}return a}function ndkImagetoDataURLForSvg(t,e){var a=new Image;-1!==t.indexOf("http")?(a.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0),e(a)},a.src=t):e(!1)}function png2svg(t,e,a,i){var r={corsenabled:!1,ltres:1,qtres:1,pathomit:1,rightangleenhance:!0,colorsampling:2,numberofcolors:2,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:0,linefilter:!0,scale:1,roundcoords:1,viewbox:!0,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:10};t?(width=t.naturalWidth,height=t.naturalHeight,textureEffect=t.src,background=(background='<defs><pattern xmlns="http://www.w3.org/2000/svg" id="texture_'+i+'" patternUnits="userSpaceOnUse" height="'+height+'" width="'+width+'" overflow="visible">')+'<image xlink:href="'+textureEffect+'" height="'+height+'" width="'+width+'" x="0" y="0" /></pattern></defs>',ImageTracer.imageToSVG(e,function(t){$("#visual_"+i).prepend(t),$("#visual_"+i).find("path").attr("fill","url(#texture_"+i+")"),svgNode=$("#visual_"+i).find("svg")[0],newSvgStr=svgNode.outerHTML,fullSvgStr=newSvgStr.replace('xml:space="preserve">','xml:space="preserve">'+background),imgNode='<object class="replaced-svg composition_element" data="data:image/svg+xml;base64,'+window.btoa(fullSvgStr)+'" type="image/svg+xml"><img src="maskUrl"/></object>',$("#visual_"+i).prepend(imgNode),$("#visual_"+i).find("svg").remove()},r)):ImageTracer.imageToSVG(e,function(t){$("#visual_"+i).find("svg").remove(),$("#visual_"+i).prepend(t),$("#visual_"+i).find("path").attr("fill",a),$("#visual_"+i).find("svg").addClassSVG("replaced-svg composition_element").attr("id","traced_svg_"+i)},r)}function trocaCorStore(t,e){1==checaSeImgExiste("https://"+document.domain+"/img/fechos_pergola/"+e+".png")&&(void 0!==zindexImgs[t]?$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_fechos_tecidos aluclass_"+t+"' style='z-index: 1;'><img class='composition_element img-reponsive aluclass_"+t+"' src='/img/fechos_pergola/"+e+".png'/></div>"):$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_fechos_tecidos aluclass_"+t+"' style='z-index: 2;'><img class='composition_element img-reponsive aluclass_"+t+"' src='/img/fechos_pergola/"+e+".png'/></div>"))}$(document).on("keyup",".visual-text-custom-font",function(){group=$(this).attr("data-group"),text=$(this).val(),textArray=text.split(""),htmlLetter="";for(var t=0;t<textArray.length;t++)htmlLetter+='<span class="customFontLetter customFont_'+group+"_letter_"+textArray[t]+'">'+textArray[t]+"</span>";$.when($(this).parent().find(".custom-font-rendering").html(htmlLetter)).then(function(){$(".customFontLetter").each(function(){content=(content=$(this).css("content")).replace('url("',"").replace('")',""),$(this).html('<img src="'+content+'"/>'),convertPercentEl($(this))})})}),$(document).on("click",".submitCSText",function(){group=$(this).parent().find(".visual-text-custom-font").attr("data-group"),zindex=$(this).parent().find(".visual-text-custom-font").attr("data-zindex"),price=$(this).parent().find(".visual-text-custom-font").attr("data-price"),ppcprice=$(this).parent().find(".visual-text-custom-font").attr("data-ppcprice"),blend=$(this).parent().find(".visual-text-custom-font").attr("data-blend"),view=$(this).parent().find(".visual-text-custom-font").attr("data-view"),dragdrop=$(this).parent().find(".visual-text-custom-font").attr("data-dragdrop"),resizeable=$(this).parent().find(".visual-text-custom-font").attr("data-resizeable"),rotateable=$(this).parent().find(".visual-text-custom-font").attr("data-rotateable"),charsCount=0,""==(texte=$(this).parent().find(".visual-text-custom-font").text())||" "==texte?(price=0,texte=""):price=0<ppcprice?ppcprice*charsCount:$(this).parent().find(".visual-text-custom-font").attr("data-price"),""!=texte&&" "!=texte||(price=0,texte=""),height=$(this).parent().find(".custom-font-rendering").innerHeight(),width=$(this).parent().find(".custom-font-rendering").innerWidth(),html='<div id="cecft_'+group+'" class="composition_element customFontTextElement" style="height:'+height+"px; width:"+width+'px">'+$(this).parent().find(".custom-font-rendering").html()+"</div>",updatePriceNdk(price,parseInt(group)),$.when(designCompo(html,group,view,zindex,dragdrop,resizeable,rotateable,width,height,"svg",blend)).then(function(){$("#cecft_"+group).css({height:"",width:""})})}),$("audio").on("play",function(){$(this).attr("id");$("audio").not(this).each(function(t,e){e.pause()})}),$("video").on("play",function(){$(this).attr("id");$("video").not(this).each(function(t,e){e.pause()})}),$(document).on("click",".form-group",function(){field=$(this).attr("data-field"),$(".editThisLayer").removeClass("layerActive"),$(".resetZones").remove(),$(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),(0<(zone=$(".zone_limit[data-group='"+field+"'], .absolute-visu[data-group='"+field+"']")).find(".ui-resizable, .ui-draggable, .rotatable").length||zone.is(".ui-resizable",".ui-draggable",".rotatable"))&&!$(this).hasClass("activeFormGroup_ooooooo")?($(".form-group").removeClass("activeFormGroup"),$(this).addClass("activeFormGroup"),$(".zone_limit, .absolute-visu").addClass("discretZone"),zone.addClass("activeZone").removeClass("discretZone"),$("#layer-edit-"+field).addClass("layerActive"),$(".editThisLayer[data-group*='"+field+"-']").addClass("layerActive").find(".ui-resizable, .ui-draggable, .rotatable").trigger("mouseover"),$("#layer-block").append('<span class="resetZones">'+resetText+"</span>")):($(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),$(".editThisLayer").removeClass("layerActive"),$(".form-group").removeClass("activeFormGroup"),$(".resetZones").remove())}),$(document).on("click",".editThisLayer",function(){group=$(this).attr("data-group").split("-"),$(".editThisLayer").removeClass("layerActive"),$(this).addClass("layerActive"),$(".form-group[data-field='"+group[0]+"']").trigger("click")}),$(document).on("mousedown",".absolute-visu",function(){$(this).is(".ui-resizable",".ui-draggable",".rotatable")&&(group=$(this).attr("data-group").split("-"),$(".editThisLayer").removeClass("layerActive"),$(this).addClass("activeZone"),$(".form-group[data-field='"+group[0]+"']").trigger("click"))}),$(document).on("click",".resetZones",function(){$(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),$(".editThisLayer").removeClass("layerActive"),$(".form-group").removeClass("activeFormGroup"),$(".resetZones").remove(),snapShotLight()}),$(document).on("keydown",'#ndkcsfields input[type="text"]',function(t){13!=t.keyCode&&9!=t.keyCode||($(this).focus(),t.preventDefault())}),$(document).on("click",".colse-comb-tab",function(){$(this).parent().parent().parent().find(".combColumn").removeClass("openedCol").css("height","")}),$(document).on("click",".ndkcf_col_title",function(){$(this).parent().hasClass("openedCol")||($(this).parent().parent().find(".combColumn").removeClass("openedCol").css("height",""),originalHeight=$(this).parent().innerHeight(),refPosition=$(this).parent().position().top,$.when($(this).parent().addClass("openedCol")).done(function(){combHeight=$(this).parent().find(".combRowList").innerHeight(),$(this).parent().css("height",combHeight+originalHeight+50+"px"),$(".combColumn").each(function(){$(this).position().top==refPosition&&$(this).css("height",combHeight+originalHeight+50+"px")})}),equalheight($(this).parent().find(".combRow")))}),$(document).on("click",".toggleQuantityDiscountBlock",function(){content=$(this).parent().find(".specificPriceBlock").html(),$.prototype.fancybox&&$.fancybox.open([{type:"inline",autoScale:!1,minHeight:30,width:"80%",height:"80%",showCloseButton:!1,autoDimensions:!1,content:'<div class="popupSpecificPrice clear clearfix">'+content+"</div>",beforeShow:function(){}}],{padding:0})}),$(document).on("click",".toggleQuantityDiscount",function(){$(this).parent().find(".quantityDiscount").slideToggle()}),$(document).on("click",".accessory-ndk-no-quantity .accessory_img_block",function(){me=$(this).parent(),rootBlock=$(".form-group[data-field='"+me.attr("data-group")+"']"),input=$("#ndk-accessory-quantity-"+me.attr("data-id-value")),max=parseInt(rootBlock.attr("data-qtty-max"));var t=$("#ndk-accessory-quantity-"+me.attr("data-id-value")).attr("data-price"),e=$("#price_"+me.attr("data-group")).val();0<max&&(rootBlock.find(".selected-accessory").removeClass("selected-accessory"),rootBlock.find(".ndk-accessory-quantity").val(0).trigger("change")),0==parseInt(input.val())?(me.addClass("selected-accessory"),input.val(1).trigger("change"),$("#price_"+me.attr("data-group")).val(parseInt(e)+parseInt(t))):(me.removeClass("selected-accessory"),input.val(0).trigger("change"),$("#price_"+me.attr("data-group")).val(parseInt(e)-parseInt(t)))}),$(document).on("click",".orientation-btn",function(){$(this).parent().find(".orientation-btn").removeClass("active_orientation"),$(this).addClass("active_orientation"),group=$(this).parent().attr("data-group-target"),$("#visual_"+group+" .composition_element, #visual_"+group+" .colorize-cover-item").removeClassSVG("standard-orientation").removeClassSVG("reverse-orientation").addClassSVG($(this).attr("data-orientation"))}),$.fn.addClassSVG=function(a){return $(this).attr("class",function(t,e){return(void 0!==e?e+" ":"")+a}),this},$.fn.removeClassSVG=function(i){return $(this).attr("class",function(t,e){var a=new RegExp("\\b"+i+"\\b","g");return e.replace(a,"")}),this},$(document).on("focus","input.surface",function(){""!=$(this).attr("step")&&$(this).trigger("blur")}),$("textarea.noborder").on("keyup change",function(){$(this).css("height","auto").css("height",this.scrollHeight+(this.offsetHeight-this.clientHeight)),$(this).parent().css("height","auto").css("height",this.scrollHeight+(this.offsetHeight-this.clientHeight)+15)}),BrowserDetect=(()=>{var t=!0,e=!0,a={browsers:{chrome:r(/Chrome\/([0-9\.]*)/),firefox:r(/Firefox\/([0-9\.]*)/),safari:r(/Version\/([0-9\.]*).*Safari/),opera:r(/Opera\/.*Version\/([0-9\.]*)/,/Opera\/([0-9\.]*)/),msie:r(/MSIE ([0-9\.]*)/,/Trident.*rv:([0-9\.]*)/)},engines:{webkit:o("AppleWebKit"),trident:r(/(MSIE|Trident)/),gecko:o("Gecko"),presto:o("Presto")},platforms:{win:r(/Windows NT ([0-9\.]*)/),mac:r(/Mac OS X ([0-9_\.]*)/),linux:o("X11","Linux")}},i=navigator.userAgent;function r(e,a){return function(){var t=e.exec(i)||a&&a.exec(i);return t&&t[1]}}function o(){var e=Array.prototype.slice.apply(arguments);return function(){for(var t=0;t<e.length;t++)if(i.indexOf(e[t])<0)return;return!0}}function n(t){var e,a;for(e in t)if(t.hasOwnProperty(e)&&(a=t[e]()))return{name:e,value:a}}function l(t){var e=document.documentElement;e.className+=(e.className?" ":"")+t}function s(t){return"string"==typeof t?t.replace(/\./g,"_"):"unknown"}return(a={platform:n(a.platforms),browser:n(a.browsers),engine:n(a.engines)}).platform&&(l(a.platform.name),t)&&l(a.platform.name+"-"+s(a.platform.value)),a.engine&&l(a.engine.name),a.browser&&(l(a.browser.name),l(a.browser.name+"-"+parseInt(a.browser.value,10)),e)&&l(a.browser.name+"-"+s(a.browser.value)),a})(),$(document).on("click",'li[data-group="2001"], li[data-group="2017"], li[data-group="2014"], li[data-group="2018"], li[data-group="2280"], li[data-group="2281"], li[data-group="3103"], li[data-group="3106"], li[data-group="3108"], li[data-group="4778"], li[data-group="4777"], li[data-group="4877"], li[data-group="4878"]',function(){var t=$(this).data("group"),e=[],a=(e[2001]=["15002","15003","15004","15005"],e[2017]=["15094","15095","15096"],e[4877]=["28260","28261","28262","28263"],e[4878]=["28272","28273","28274"],e[2280]=["17805","17806","17807"],e[2281]=["17814","17815","17816","17817"],e[2014]=["15076","15077","15078","15079"],e[2018]=["15102","15103","15104"],e[3103]=["22114","22115","22116"],e[3106]=["22129"],e[3108]=["22143","22144","22145"],0);for(i=0;i<e[t].length;i++)$('li[data-id-value="'+e[t][i]+'"]').hasClass("selected-accessory")&&a++;0==a?$("div[data-field='2234']").length?(RemoveField("2234"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='4911']").length?RemoveField("4911"):$("div[data-field='4879']").length?RemoveField("4879"):$("div[data-field='4881']").length?RemoveField("4881"):$("div[data-field='2251']").length?(RemoveField("2251"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='2289']").length?(RemoveField("2289"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='4913']").length?(RemoveField("4913"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3104']").length?(RemoveField("3104"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3105']").length?(RemoveField("3105"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3109']").length&&(RemoveField("3109"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='2234']").length?ShowField("2234"):$("div[data-field='4911']").length?ShowField("4911"):$("div[data-field='4879']").length?ShowField("4879"):$("div[data-field='4881']").length?ShowField("4881"):$("div[data-field='2251']").length?ShowField("2251"):$("div[data-field='2289']").length?ShowField("2289"):$("div[data-field='4913']").length?ShowField("4913"):$("div[data-field='3104']").length?ShowField("3104"):$("div[data-field='3105']").length?ShowField("3105"):$("div[data-field='3109']").length&&ShowField("3109")}),$(document).on("click",'li[data-group="2001"], li[data-group="2017"], li[data-group="2014"], li[data-group="2018"], li[data-group="2280"], li[data-group="2281"], li[data-group="3103"], li[data-group="3106"], li[data-group="3108"], li[data-group="4778"], li[data-group="4777"], li[data-group="4877"], li[data-group="4878"]',function(){var t=$(this).data("group"),e=[],a=(e[2001]=["31022","31023","31024","31025"],e[2017]=["31019","31020","31021"],e[4877]=["31008","31009","31010","31011"],e[4878]=["30935","30936","30937"],e[2280]=["31026","31027","31028"],e[2281]=["31029","31030","31031","31032"],e[2014]=["31015","31016","31017","31018"],e[2018]=["31012","31013","31014"],0);for(i=0;i<e[t].length;i++)$('li[data-id-value="'+e[t][i]+'"]').hasClass("selected-accessory")&&a++;0==a?$("div[data-field='5599']").length?(RemoveField("5599"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='5587']").length?(RemoveField("5587"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='5598']").length?(RemoveField("5598"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='5600']").length?(RemoveField("5600"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3104']").length?(RemoveField("3104"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3105']").length?(RemoveField("3105"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3109']").length&&(RemoveField("3109"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='5599']").length?ShowField("5599"):$("div[data-field='5587']").length?ShowField("5587"):$("div[data-field='5598']").length?ShowField("5598"):$("div[data-field='5600']").length?ShowField("5600"):$("div[data-field='3104']").length?ShowField("3104"):$("div[data-field='3105']").length?ShowField("3105"):$("div[data-field='3109']").length&&ShowField("3109")}),$(document).on("click",'li[data-group="2234"], li[data-group="4911"], li[data-group="2251"], li[data-group="2289"], li[data-group="4913"], li[data-group="3104"], li[data-group="3105"], li[data-group="3109"], li[data-group="4779"], li[data-group="4879"], li[data-group="4881"], li[data-group="5587"], li[data-group="5598"], li[data-group="5599"], li[data-group="5600"]',function(){var t,e=$(this).data("value"),a=(corStore=e.match(/7016/)?"7016":e.match(/3030/)?"3030":e.match(/0202/)?"0202":"9016",["15002","15003","15004","15005","15094","15095","15096","15076","15077","15078","15079","15102","15103","15104","17805","17806","17807","17814","17815","17816","17817","27640","27641","27642","27628","27629","27630","27631","28260","28261","28262","28263","28272","28273","28274","22114","22115","22116","22129","22143","22144","22145","30935","30936","30937","31008","31009","31010","31011","31012","31013","31014","31015","31016","31017","31018","31019","31020","31021","31022","31023","31024","31025","31026","31027","31028","31029","31030","31031","31032"]);if($.each($('li[data-group="2401"].selected-color, li[data-group="2409"].selected-color, li[data-group="2425"].selected-color, li[data-group="2011"].selected-color, li[data-group="2019"].selected-color, li[data-group="2007"].selected-color, li[data-group="2302"].selected-color, li[data-group="2278"].selected-color, li[data-group="2279"].selected-color, li[data-group="4769"].selected-color, li[data-group="4770"].selected-color, li[data-group="4864"].selected-color, li[data-group="4865"].selected-color, li[data-group="5151"].selected-color, li[data-group="5166"].selected-color'),function(){campoCorEstrutura=$(this).data("value")}),legendaCorEstrutura=campoCorEstrutura.match(/7016/)?"Gris RAL "+(corEstrutura="7016"):campoCorEstrutura.match(/9016/)?"Blanc RAL "+(corEstrutura="9016"):campoCorEstrutura.match(/9005/)?"Noir RAL "+(corEstrutura="9005"):campoCorEstrutura.match(/8019/)?"Gris RAL "+(corEstrutura="8019"):campoCorEstrutura.match(/8014/)?"Marron RAL "+(corEstrutura="8014"):campoCorEstrutura.match(/7035/)?"Gris RAL "+(corEstrutura="7035"):campoCorEstrutura.match(/6005/)?"Vert RAL "+(corEstrutura="6005"):campoCorEstrutura.match(/5015/)?"Bleu RAL "+(corEstrutura="5015"):campoCorEstrutura.match(/5013/)?"Bleu RAL "+(corEstrutura="5013"):campoCorEstrutura.match(/3005/)?"Rouge RAL "+(corEstrutura="3005"):"Ivoire RAL "+(corEstrutura="1015"),"2234"==$(this).data("group")||"4911"==$(this).data("group")||"4779"==$(this).data("group")||"2289"==$(this).data("group")||"4913"==$(this).data("group")||"5599"==$(this).data("group")||"5600"==$(this).data("group"))if(corStore!=corEstrutura)for($("div").remove(".aluclass_fechos_tecidos"),i=0;i<a.length;i++)$("img.aluclass_"+a[i]).length&&(t=a[i]+"-"+corStore+"-tecido",console.log("novaImagem "+t),trocaCorStore(a[i],t));else $("div").remove(".aluclass_fechos_tecidos");else if("7016"!=corStore&&"3030"!=corStore)for($("div").remove(".aluclass_fechos_tecidos"),i=0;i<a.length;i++)$("img.aluclass_"+a[i]).length&&(t=a[i]+"-"+corStore+"-tecido",console.log("novaImagem "+t),trocaCorStore(a[i],t));else $("div").remove(".aluclass_fechos_tecidos");var r=0;for(console.log(a.length),i=0;i<a.length;i++)$('li[data-id-value="'+a[i]+'"]').hasClass("selected-accessory")&&r++;console.log(r),0<r&&(console.log("atribui a cor da estrutura "+legendaCorEstrutura),$("#ndkcsfield_3065").html(legendaCorEstrutura),$("#text_3065").attr("value",legendaCorEstrutura))}),$(document).on("click","input.ndk-radio",function(){var t=$(this).data("group"),e=$(this).data("id-value");"2264"!=t&&"2262"!=t||("17675"==e||"17673"==e?$("div.aluclass_"+e).length||$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_lamina_pergola aluclass_"+e+"' style='z-index: 1;'><img class='composition_element img-reponsive aluclass_"+e+"' src='/img/laminas_pergola/lamina-gris-promo.png'/></div>"):$("div").remove(".aluclass_lamina_pergola"))}),$(document).on("click",'li[data-group="2522"]',function(){var t=$(this).data("value");"9016"==(t=t.match(/7016/)?"7016":"9016")?(t="store-vertical-frente-9016-tecido",console.log("novaImagem "+t),$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos_tecidos' style='z-index: 2;'><img class='composition_element img-reponsive' src='/img/fechos_pergola/"+t+".png'/></div>")):$("div").remove(".aluclass_fechos_tecidos")});