function getOpositeColor(t){for(;-1!=t.indexOf(" ");)t=t.replace(" ","");return(x=/([0-9]{0,3}),([0-9]{0,3}),([0-9]{0,3})/.exec(t))?(color={r:parseInt(x[1]),g:parseInt(x[2]),b:parseInt(x[3])},OpositeColor=.3*color.r+.59*color.g+.11*color.b<=128?"#FFF":"#333"):-1}!function(g){var x,m=!1,e={init:function(t){x=g.extend({hide_fallbacks:!1,selected:function(t){},selectedSize:function(t){},selectedColor:function(t){},initial:"",initialSize:"",initialColor:"",initialEffect:"",initialAlignment:"",fonts:[],sizes:[],colors:[],effects:[],alignments:[],showStroke:!1},t);function e(t){n.find("span.fontSelector").html(a(t).replace(/["']{1}/gi,"")),n.css("font-family",t).attr("data-font-family",t),l=t,n.callback(l)}function i(t){n.find("span.sizeSelector").html(t),n.css("font-size",t),r=t,n.callback(r)}function o(t){n.find("span.colorSelector").html(t),n.find(".texteditor, .noborder").attr("data-texture",""),n.find("span.colorSelector").css("background",t).html(t),0<=t.indexOf("url")?(n.find(".texteditor, .noborder").attr("data-texture",t),n.find(".texteditor").css("color",x.initialColor)):n.find(".texteditor").css("color",t),c=t,void 0!==n.find(".texteditor").css("color")&&n.find(".textarea").css("background",getOpositeColor(n.find(".texteditor").css("color"))),n.callback(c)}var n=this,s=(n.callback=x.selected,!1),l=!1,r=!1,c=!1,a=function(t){return t};if(0==g(this).find(".arcSelector").length&&g(this).prepend('<span class="arcSelector"><i data-align="center" class="icon icon-circle-o-notch"><br><input class="arcText" type="range" min="-700" value="0" max="700" step="10"/></span>'),0==g(this).find(".alignSelector").length){alignHtml='<span class="alignSelector">';for(var f=0;f<x.alignments.length;f++)alignHtml+='<i data-align="'+x.alignments[f]+'" class="icon-align icon icon-align-'+x.alignments[f]+" "+(x.initialAlignment==x.alignments[f]?"active":"")+'"></i>';alignHtml+="</span>",g(this).prepend(alignHtml)}for(f=0;f<x.effects.length;f++)0==g(this).find("."+x.effects[f]+"Selector").length&&g(this).prepend('<span class="'+x.effects[f]+"Selector effectButton "+(x.initialEffect==x.effects[f]?"active":"")+'" data-effect="'+x.effects[f]+'"></span>');if(0==g(this).find(".toolSeparate").length&&g(this).prepend(' <p class="clear clearfix toolSeparate"></p>'),0==g(this).find(".fontSelector").length&&g(this).prepend('<span class="fontSelector">'+x.initial.replace(/'/g,"&#039;")+"</span>"),0==g(this).find(".sizeSelector").length&&g(this).prepend('<span class="sizeSelector">'+x.initialSize+"</span>"),0==g(this).find(".strokeSelector").length&&x.showStroke&&g(this).prepend('<span class="strokeSelector">'+x.initialColor+"</span>"),0==g(this).find(".colorSelector").length&&g(this).prepend('<span class="colorSelector">'+x.initialColor+"</span>"),0==g(this).find(".fontSelectUl").length)for(var d=g('<ul class="fontSelectUl"></ul>').appendTo(g(this)),f=0;f<x.fonts.length;f++){var p=g("<li>"+a(x.fonts[f])+"</li>").appendTo(d);g(p).css("font-family",x.fonts[f])}else{d=g(this).find(".fontSelectUl");m=!0}if(0==g(this).find(".fontSizeSelectUl").length)for(var h=g('<ul class="fontSizeSelectUl"></ul>').appendTo(g(this)),f=0;f<x.sizes.length;f++){mySize=x.sizes[f],g(window).width()<768&&(mySize=x.sizes[f]/2);p=g("<li>"+mySize+"</li>").appendTo(h);g(p).css("font-size",mySize+"px")}else{h=g(this).find(".fontSizeSelectUl");m=!0,t=h,g(window).width()<768&&t.find("li").each(function(){fsize=g(this).text(),nfsize=parseFloat(fsize/2),g(this).text(nfsize).css("font-size",parseFloat(nfsize)+"px")})}if(0==g(this).find(".fontColorSelectUl").length)for(var u=g('<ul class="fontColorSelectUl"></ul>').appendTo(g(this)),f=0;f<x.colors.length;f++){p=g("<li>"+x.colors[f]+"</li>").appendTo(u);g(p).css("background",x.colors[f])}else{u=g(this).find(".fontColorSelectUl");m=!0}if(0==g(this).find(".strokeColorSelectUl").length)for(var S=g('<ul class="strokeColorSelectUl"></ul>').appendTo(g(this)),f=0;f<x.colors.length;f++){p=g("<li>"+x.colors[f]+"</li>").appendTo(S);g(p).css("background",x.colors[f])}else{S=g(this).find(".strokeColorSelectUl");m=!0}d.hide(),h.hide(),u.hide(),S.hide(),x.fonts.length<2&&g(this).find(".fontSelector").hide(),x.colors.length<2&&(g(this).find(".colorSelector").hide(),g(this).find(".strokeSelector").hide()),x.sizes.length<2&&g(this).find(".sizeSelector").hide(),x.effects.length<2&&g(this).find(".effectButton").hide(),x.alignments.length<2&&g(this).find(".icon-align").hide(),m||(""!=x.initial&&e(x.initial),""!=x.initialSize&&i(x.initialSize),""!=x.initialColor&&o(x.initialColor),""!=x.initialEffect&&g(this).find(".texteditor, .noborder").attr("data-effect",x.initialEffect),g(this).find(".texteditor, .noborder").css("text-align",x.initialAlignment),g(this).find(".noborder").css("float",x.initialAlignment)),d.find("li").click(function(){s&&(d.slideUp("fast",function(){s=!1}),d.find("li").removeClass("active"),g(this).addClass("active"),e(g(this).css("font-family")))}),h.find("li").click(function(){s&&(h.slideUp("fast",function(){s=!1}),h.find("li").removeClass("active"),g(this).addClass("active"),i(g(this).css("font-size")))}),u.find("li").click(function(){s&&(u.slideUp("fast",function(){s=!1}),u.find("li").removeClass("active"),g(this).addClass("active"),o(g(this).text()))}),S.find("li").click(function(){var t;s&&(S.slideUp("fast",function(){s=!1}),S.find("li").removeClass("active"),g(this).addClass("active"),t=g(this).css("background-color"),n.find("span.strokeSelector").css("border-color",t).html(t),void 0!==n.find(".texteditor").css("color")&&n.find(".texteditor").attr("stroke-color",t),n.find(".noborder").css("text-shadow",t+"1px 1px, "+t+" -1px 1px, "+t+" -1px -1px, "+t+" 1px -1px"),selectedStrokeColor=t,n.find("span.strokeSelector").css("border-color",selectedStrokeColor),n.callback(selectedStrokeColor))}),g(".sizeSelector").click(function(t){s||(t.stopPropagation(),g(this).parent().find(".fontSizeSelectUl").slideDown("fast",function(){s=!0}))}),g(".colorSelector").click(function(t){s||(t.stopPropagation(),g(this).parent().find(".fontColorSelectUl").slideDown("fast",function(){s=!0}))}),g(".strokeSelector").click(function(t){s||(t.stopPropagation(),g(this).parent().find(".strokeColorSelectUl").slideDown("fast",function(){s=!0}))}),g(".fontSelector").click(function(t){s||(t.stopPropagation(),g(this).parent().find(".fontSelectUl").slideDown("fast",function(){s=!0}))}),g(".alignSelector > i").click(function(){g(this).parent().parent().find(".alignSelector > i").removeClass("active"),g(this).addClass("active"),g(this).parent().parent().find(".texteditor, .noborder").css("text-align",g(this).attr("data-align")),g(this).parent().parent().find(".noborder").css("float",g(this).attr("data-align"))}),g(".effectButton").click(function(){g(this).parent().parent().find(".effectButton").removeClass("active"),g(this).addClass("active"),g(this).parent().parent().find(".texteditor, .noborder").attr("data-effect",g(this).attr("data-effect")),g(this).parent().parent().find(".submitText, .submitTextItem").trigger("click")}),g("html").click(function(){s&&(d.slideUp("fast",function(){s=!1}),h.slideUp("fast",function(){s=!1}),u.slideUp("fast",function(){s=!1}),S.slideUp("fast",function(){s=!1}))})},selected:function(){return root.css("font-family")},selectedSize:function(){return root.css("font-size")},selectedColor:function(){return root.css("color")},selectedStrokeColor:function(){return root.css("color")},select:function(t){root.find("span.fontSelector").html(t.substr(0,t.indexOf(",")).replace(/["']{1}/gi,"")),root.css("font-family",t).attr("data-font-family",t),selected=t},selectSize:function(t){root.find("span.sizeSelector").html(t),root.find(".texteditor").css("font-size",t),root.css("font-size",t),root.find(".noborder").trigger("change"),selectedSize=t},selectColor:function(t){console.log(t),root.find(".texteditor, .noborder").attr("data-texture",""),root.find("span.colorSelector").css("background",t).html(t),0<=t.indexOf("url")?(root.find(".texteditor, .noborder").attr("data-texture",t),root.find(".texteditor").css("color",x.initialColor)):root.find(".texteditor").css("color",t),selectedColor=t,root.find("span.colorSelector").css("background",selectedColor)},selectStrokeColor:function(t){root.find("span.strokeSelector").css("border-color",t).html(t),root.find(".texteditor").attr("stroke-color",t),root.find(".noborder").css("text-shadow",t+"1px 1px, "+t+" -1px 1px, "+t+" -1px -1px, "+t+" 1px -1px"),selectedStrokeColor=t,root.find("span.strokeSelector").css("border-color",selectedStrokeColor)}};g.fn.fontSelector=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void g.error("Method "+t+" does not exist on jQuery.fontSelector"):e.init.apply(this,arguments)}}(jQuery),function(n){n.fn.fitText=function(t,e){var i=t||1,o=n.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},e);return this.each(function(){function t(){e.css("font-size",Math.max(Math.min(e.width()/(10*i),parseFloat(o.maxFontSize)),parseFloat(o.minFontSize)))}var e=n(this);t(),n(window).on("resize.fittext orientationchange.fittext",t)})}}(jQuery);