!function(m,v){var n=/^key/,o=/^(?:mouse|contextmenu)|click/;m.fn.simulate=function(e,t){return this.each(function(){new m.simulate(this,e,t)})},m.simulate=function(e,t,n){var o=m.camelCase("simulate-"+t);this.target=e,this.options=n,this[o]?this[o]():this.simulateEvent(e,t,n)},m.extend(m.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}}),m.extend(m.simulate.prototype,{simulateEvent:function(e,t,n){var o=this.createEvent(t,n);this.dispatchEvent(e,t,o,n)},createEvent:function(e,t){return n.test(e)?this.keyEvent(e,t):o.test(e)?this.mouseEvent(e,t):void 0},mouseEvent:function(e,t){var n,o,c;return t=m.extend({bubbles:!0,cancelable:"mousemove"!==e,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:v},t),document.createEvent?((n=document.createEvent("MouseEvents")).initMouseEvent(e,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget||document.body.parentNode),0===n.pageX&&0===n.pageY&&Object.defineProperty&&(e=n.relatedTarget.ownerDocument||document,o=e.documentElement,c=e.body,Object.defineProperty(n,"pageX",{get:function(){return t.clientX+(o&&o.scrollLeft||c&&c.scrollLeft||0)-(o&&o.clientLeft||c&&c.clientLeft||0)}}),Object.defineProperty(n,"pageY",{get:function(){return t.clientY+(o&&o.scrollTop||c&&c.scrollTop||0)-(o&&o.clientTop||c&&c.clientTop||0)}}))):document.createEventObject&&(n=document.createEventObject(),m.extend(n,t),n.button={0:1,1:4,2:2}[n.button]||(-1===n.button?0:n.button)),n},keyEvent:function(t,n){var o;if(n=m.extend({bubbles:!0,cancelable:!0,view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:v},n),document.createEvent)try{(o=document.createEvent("KeyEvents")).initKeyEvent(t,n.bubbles,n.cancelable,n.view,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode)}catch(e){(o=document.createEvent("Events")).initEvent(t,n.bubbles,n.cancelable),m.extend(o,{view:n.view,ctrlKey:n.ctrlKey,altKey:n.altKey,shiftKey:n.shiftKey,metaKey:n.metaKey,keyCode:n.keyCode,charCode:n.charCode})}else document.createEventObject&&(o=document.createEventObject(),m.extend(o,n));return!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())&&"[object Opera]"!=={}.toString.call(window.opera)||(o.keyCode=0<n.charCode?n.charCode:n.keyCode,o.charCode=v),o},dispatchEvent:function(e,t,n){e[t]?e[t]():e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&e.fireEvent("on"+t,n)},simulateFocus:function(){var e,t=!1,n=m(this.target);function o(){t=!0}n.bind("focus",o),n[0].focus(),t||((e=m.Event("focusin")).preventDefault(),n.trigger(e),n.triggerHandler("focus")),n.unbind("focus",o)},simulateBlur:function(){var e,t=!1,n=m(this.target);function o(){t=!0}n.bind("blur",o),n[0].blur(),setTimeout(function(){n[0].ownerDocument.activeElement===n[0]&&n[0].ownerDocument.body.focus(),t||((e=m.Event("focusout")).preventDefault(),n.trigger(e),n.triggerHandler("blur")),n.unbind("blur",o)},1)}}),m.extend(m.simulate.prototype,{simulateDrag:function(){var e,t,n=0,o=this.target,c=o.ownerDocument,i=this.options,r="corner"===i.handle?(t=m((e=o).ownerDocument),{x:(e=(e=m(e)).offset()).left-t.scrollLeft(),y:e.top-t.scrollTop()}):(t=m((e=o).ownerDocument),{x:(r=(e=m(e)).offset()).left+e.outerWidth()/2-t.scrollLeft(),y:r.top+e.outerHeight()/2-t.scrollTop()}),a=Math.floor(r.x),u=Math.floor(r.y),l={clientX:a,clientY:u},s=i.dx||(i.x!==v?i.x-a:0),d=i.dy||(i.y!==v?i.y-u:0),E=i.moves||3;for(this.simulateEvent(o,"mousedown",l);n<E;n++)a+=s/E,u+=d/E,l={clientX:Math.round(a),clientY:Math.round(u)},this.simulateEvent(c,"mousemove",l);m.contains(c,o)?(this.simulateEvent(o,"mouseup",l),this.simulateEvent(o,"click",l)):this.simulateEvent(c,"mouseup",l)}})}(jQuery);