function ActiveFieldNDK(e){var a=$(e).closest("[data-position]"),a=(next_position=a.data("position")+1,$(".form-group[data-position='"+next_position+"']").removeClass("aluclass-disable-div"),$(e).closest("[data-iteration]")),a=(next_iteration=a.data("iteration")+1,$(".form-group[data-iteration='"+next_iteration+"']").removeClass("aluclass-disable-div"),$(e).closest("[data-rposition]"));next_rposition=a.data("rposition")+1,$(".form-group[data-rposition='"+next_rposition+"']").removeClass("aluclass-disable-div")}function GetRequiredProgressBar(e){var a=0,t=0;return e.each(function(){$(".progress-field-ndk-"+$(this).parent().parent().parent().attr("data-field")).remove(),$(this).is(":radio")?parseInt($(this).parent().parent().parent().attr("data-field"))!=parseInt(t)&&(t=$(this).parent().parent().parent().attr("data-field"),a++):(verificaCampo=$(this).parent().parent().parent().attr("data-typefield"),-1===$.inArray(verificaCampo,["11","23","17","24"])&&parseInt($(this).parent().parent().parent().attr("data-field"))!=parseInt(t)&&(t=$(this).parent().parent().parent().attr("data-field"),a++))}),a}function GetSelectProgressBar(e){var a=0,t=0;return e.each(function(){val=$(this).val(),$(this).is(":radio")?$(this).is(":checked")&&(t=$(this).parent().parent().parent().attr("data-field"),a++,$("div[data-field='"+t+"'] > label.toggler").append('<span class="progress-field progress-field-ndk-'+t+'"> <span class="material-icons progress-field-success"> done </span> </span>')):$(this).is("select")?val&&parseInt($(this).parent().parent().parent().attr("data-field"))!=parseInt(t)&&(t=$(this).parent().parent().parent().attr("data-field"),$("div[data-field='"+t+"'] > label.toggler").append('<span class="progress-field progress-field-ndk-'+t+'"> <span class="material-icons progress-field-success"> done </span> </span>'),a++):""!=val&&": "!=val.slice(-2)&&parseInt($(this).parent().parent().parent().attr("data-field"))!=parseInt(t)&&(t=$(this).parent().parent().parent().attr("data-field"),$("div[data-field='"+t+"'] > label.toggler").append('<span class="progress-field progress-field-ndk-'+t+'"> <span class="material-icons progress-field-success"> done </span> </span>'),a++)}),a}function ProgressBar(){var e=$(".form-group:not([class*='disabled_value_by'])").find(".required_field"),a=GetRequiredProgressBar(e),e=GetSelectProgressBar(e);progress=e/a*100,color=0<=parseInt(progress)&&parseInt(progress)<20?"#E22128":20<=parseInt(progress)&&parseInt(progress)<40?"#e25821e7":40<=parseInt(progress)&&parseInt(progress)<60?"#a78528":60<=parseInt(progress)&&parseInt(progress)<80?"#d6e232":80<=parseInt(progress)&&parseInt(progress)<99?"#81a728":"#28a745",0<progress?$(".progress-text-begin").hide():$(".progress-text-begin").show(),$(".progress-bar").css({"background-color":color}),$(".progress-bar").css({width:parseInt(progress)+"%"}),34<parseInt(progress)?$(".progress-text").text("Progression : "+parseInt(progress)+"%"):$(".progress-text").text(parseInt(progress)+"%")}function ShowNDKFieldError(e,a){$(".submitContainer").hide(),$(".div_PrazoEntregaDir").hide(),$(".submitNdkcsfields").hide(),$(".mon_devis").hide(),$(".form-group[data-field='"+e+"']").css("background","#F2DEDE").focus(),$(".form-group[data-field='"+e+"'] > .error").remove(),$(".form-group[data-field='"+e+"'] > fieldPane >.error").remove(),$(".form-group[data-field='"+e+"']").removeClass("focusRequired"),$(".form-group[data-field='"+e+"']").append(a)}function HideNDKFieldError(e){$(".form-group[data-field='"+e+"']").css("background","#ffffff").focus(),$(".form-group[data-field='"+e+"'] > .error").remove(),$(".form-group[data-field='"+e+"']").removeClass("focusRequired"),$(".form-group[data-field='"+e+"'] > .fieldPane > .error").remove(),0==$(".error.alert-danger").length&&($(".submitContainer").show(),$(".div_PrazoEntregaDir").show(),$(".submitNdkcsfields").show(),$(".mon_devis").show())}function ShowField(e){$("div[data-field='"+e+"']").show(),$("#ndkcsfield_"+e).addClass("required_field")}function RemoveField(e){$("img[data-group='"+e+"']").removeClass("selected-value "),$("img[data-group='"+e+"']").removeClass("selected-color"),$("#ndkcsfield_"+e).removeClass("required_field"),$("#ndkcsfield_"+e).val(""),$("div[data-field='"+e+"']").hide(),$("#visual_"+e).remove()}function HideAllFields(e,a){for(var t=0;t<e.length;t++)e[t]==a?ShowField(a):(RemoveField(e[t]),updatePriceNdk(0,e[t]),$("#ndkcsfield_"+e[t]).val(""))}function CheckSeImgExiste(e){var a=new XMLHttpRequest;return a.open("HEAD",e,!1),a.send(),404!=a.status}function RemoverCustomizedImagemNDK(){$("div").remove(".aluclass_img_customized")}function RemoverCustomizedSpecificImagemNDK(e){$("div").remove(".aluclass_customizedimagem_"+e)}function GlobalCustomizedImagemNDK(e,a,t,r){CheckSeImgExiste("https://"+document.domain+"/img/"+a+"/"+e+"."+r)&&$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_img_customized' style='z-index: "+t+";'><img class='composition_element img-reponsive'  src='/img/"+a+"/"+e+"."+r+"'/></div>")}function CustomizedImagemNDK(e,a,t,r,i){campoCor=$("li[data-group='"+e+"'].color-ndk.selected-value").data("value"),cor=campoCor.match(/7016/)?"7016":campoCor.match(/9016/)?"9016":campoCor.match(/9005/)?"9005":campoCor.match(/8019/)?"8019":campoCor.match(/8014/)?"8014":campoCor.match(/7035/)?"7035":campoCor.match(/6005/)?"6005":campoCor.match(/5015/)?"5015":campoCor.match(/5013/)?"5013":campoCor.match(/3005/)?"3005":campoCor.match(/1015/)?"1015":campoCor.match(/1013/)?"1013":campoCor.match(/3007/)?"3007":campoCor.match(/6009/)?"6009":campoCor.match(/6021/)?"6021":campoCor.match(/7011/)?"7011":campoCor.match(/7012/)?"7012":campoCor.match(/7022/)?"7022":campoCor.match(/7024/)?"7024":campoCor.match(/7030/)?"7030":campoCor.match(/7038/)?"7038":campoCor.match(/7040/)?"7040":campoCor.match(/8017/)?"8017":campoCor.match(/9001/)?"9001":campoCor.match(/9006/)?"9006":campoCor.match(/9007/)?"9007":campoCor.match(/9010/)?"9010":"7016",$("div.aluclass_"+a).length||CheckSeImgExiste("https://"+document.domain+"/img/"+t+"/"+a+"-"+cor+"."+i)&&$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_img_customized aluclass_customizedimagem_"+e+" aluclass_"+a+"' style='z-index: "+r+";'><img class='composition_element img-reponsive aluclass_"+a+"' src='/img/"+t+"/"+a+"-"+cor+"."+i+"'/></div>")}function CustomizedImagemNDKColor(e,a,t,r,i,s){cor=e.match(/7016/)?"7016":e.match(/9016/)?"9016":e.match(/9005/)?"9005":e.match(/8019/)?"8019":e.match(/8014/)?"8014":e.match(/7035/)?"7035":e.match(/6005/)?"6005":e.match(/5015/)?"5015":e.match(/5013/)?"5013":e.match(/3005/)?"3005":e.match(/1015/)?"1015":e.match(/1013/)?"1013":e.match(/3007/)?"3007":e.match(/6009/)?"6009":e.match(/6021/)?"6021":e.match(/7011/)?"7011":e.match(/7012/)?"7012":e.match(/7022/)?"7022":e.match(/7024/)?"7024":e.match(/7030/)?"7030":e.match(/7038/)?"7038":e.match(/7040/)?"7040":e.match(/8017/)?"8017":e.match(/9001/)?"9001":e.match(/9006/)?"9006":e.match(/9007/)?"9007":e.match(/9010/)?"9010":"7016",CheckSeImgExiste("https://"+document.domain+"/img/"+r+"/"+t+"-"+cor+"."+s)&&$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_img_customized aluclass_customizedimagem_"+a+"' style='z-index: "+i+";'><img class='composition_element img-reponsive aluclass_"+t+"' src='/img/"+r+"/"+t+"-"+cor+"."+s+"'/></div>")}function MessageCalculator(e){var a=!1;switch(e.operador){case">":e.valor1>e.valor2&&(a=!0);break;case"<":e.valor1<e.valor2&&(a=!0);break;case">=":e.valor1>=e.valor2&&(a=!0);break;case"<=":e.valor1<=e.valor2&&(a=!0);break;case"=":e.valor1==e.valor2&&(a=!0)}return a}function MessageWarning(e,a,t){$("#warning_text_"+e).html("");var r,i,s,o=!1;18===$(".ndkackFieldItem[data-field='"+e+"']").data("typefield")&&(r=$("#dimension_text_width_"+e).val(),a=a.replace("[%width%]",r),i=$("#dimension_text_height_"+e).val(),a=a.replace("[%height%]",i),s=parseInt(r)/1e3*(parseInt(i)/1e3),a=a.replace("[%area%]",s.toFixed(2)),"area"==t.valor2?t.valor2=parseInt(s):"width"==t.valor2?t.valor2=parseInt(r):"height"==t.valor2&&(t.valor2=parseInt(i)),"area"==t.valor1?t.valor1=parseInt(s):"width"==t.valor1?t.valor1=parseInt(r):"height"==t.valor1&&(t.valor1=parseInt(i)),o=MessageCalculator(t)),o&&($("#warning_text_"+e).html(a),$("#warning_text_"+e).effect("shake","slow"))}function RemoveSelectOptions(e,a){var t;inputa=$("li[data-id-value='"+e+"']").find(".ndk-accessory-quantity:eq(0)"),0!=parseInt(inputa.val())&&($("li[data-id-value='"+e+"']").removeClass("selected-accessory"),inputa.val(0).trigger("change"),e=$("#ndk-accessory-quantity-"+e).attr("data-price"),t=$("#price_"+a).val(),$("#price_"+a).val(parseInt(t)-parseInt(e)))}function ChangeSelectToSelect(e,a){$("#"+a).val($("#"+e).val()),$("#"+a).trigger("change")}function GetPergentageColor(e){e=$(".selected-color[data-group='"+e+"']").attr("data-value").split("+");return 1<e.length?e[1]:""}function VerreireLimitOptionOpen(e,a,t){var r=$(".ndk-radio[data-id-value='"+e+"']").attr("data-price"),r=a*parseInt(r);$("label[for=radio_"+t+"_"+e+"]").text(" Oui, tous les verrières ont une option d'ouverture.: + "+r+" €")}function RemoveAllOrtherSelectOptions(e,a){var t;inputa=$("li[data-id-value='"+e+"']").find(".ndk-accessory-quantity:eq(0)"),0!=parseInt(inputa.val())&&($("li[data-id-value='"+e+"']").removeClass("selected-accessory"),inputa.val(0).trigger("change"),e=$("#ndk-accessory-quantity-"+e).attr("data-price"),t=$("#price_"+a).val(),$("#price_"+a).val(parseInt(t)-parseInt(e)))}function ArrayShowPortillonMunich(){return{1200:4685,1600:4689,1800:4690,1400:4691}}function ArrayShowPortillonBerlin(){return{1200:4681,1600:4686,1800:4687,1400:4688}}function ArrayShowPortillonFrankfurt(){return{1200:4693,1600:4694,1800:4695,1400:4696}}function ArrayShowPortillonHamburg(){return{1200:4699,1600:4700,1800:4701,1400:4702}}function ArrayShowPortillonPotsdam(){return{1200:4704,1600:4705,1800:4706,1400:4707}}function ArrayShowPortillonKoln(){return{1200:4709,1600:4710,1800:4711,1400:4712}}function ArrayShowPortillonDresden(){return{1200:4717,1600:4714,1800:4715,1400:4716}}function ArrayShowPortillonDortmund(){return{1200:4720,1600:4721,1800:4722,1400:4723}}function ArrayShowPortillonEssen(){return{1200:4725,1600:4726,1800:4727,1400:4728}}function ArrayShowPortillonStuttgart(){return{1200:4729,1600:4731,1800:4732,1400:4733}}function ArrayShowPortillonNurnberg(){return{1200:4735,1600:4736,1800:4737,1400:4738}}function ArrayShowPortillonBremen(){return{1200:4740,1600:4741,1800:4742,1400:4743}}function ArrayShowPortillonHanover(){return{1200:4745,1600:4746,1800:4747,1400:4748}}function ArrayShowPortillonLabel(){return{1200:5192,1600:5222,1800:5223}}function PortailShowPortillon(e,a){$.each(a,function(e,a){RemoveField(a),$("li.accessory-ndk-no-quantity[data-group='"+a+"']").each(function(e){RemoveAllOrtherSelectOptions(idFieldValueNDKFor=$(this).attr("data-id-value"),a)})}),ShowField(a[e.substring(0,4)])}function AlertMedidaJanelaCintree(e,a,t){var r=parseInt(e)-parseInt(a);parseInt(a)<300?(message='<span class="error alert-danger clear clearfix">La hauteur des côtés doit être supérieure à 300 mm.</span>',HideNDKFieldError(t),ShowNDKFieldError(t,message)):parseInt(a)<parseInt(r)?(message='<span class="error alert-danger clear clearfix">La hauteur latérale doit être supérieure à la hauteur du surbaissé de la fenêtre.</span>',HideNDKFieldError(t),ShowNDKFieldError(t,message)):parseInt(a)>parseInt(e)?(message='<span class="error alert-danger clear clearfix">La hauteur de la latérale ne peut être supérieure à la hauteur du passage du champ des dimensions.</span>',HideNDKFieldError(t),ShowNDKFieldError(t,message)):HideNDKFieldError(t)}function TextHeightLateral(){var e=[];return e[30188]=3089,e[30203]=3089,e[30176]=3101,e[30198]=3101,e}function Cintreecheck(e,a,t){widthCAL=parseInt(a)+parseInt(a/2),749<parseInt(t)&&699<parseInt(a)&&(parseInt(t)>parseInt(widthCAL)?HideNDKFieldError(e):(message='<span class="error alert-danger clear clearfix">Les mesures '+a+"mm x "+t+"mm ne sont pas possible à fabriquer.</span>",HideNDKFieldError(e),ShowNDKFieldError(e,message)))}function HideDimensionsGlassDoor(e,a,t){var r=["8305","8303","8302","8221","8219","8218","8298","8296","8295","8151","8149","8148","8312","8310","8309","8156","8155","8319","8317","8316","8165","8163","8162","8326","8324","8323","8172","8170","8169","8333","8331","8330","8179","8177","8176","8340","8338","8337","8186","8184","8183","8347","8345","8344","8193","8191","8190","8354","8352","8351","8200","8198","8197","8361","8359","8358","8207","8205","8204","8368","8366","8365","8214","8212","8211","12192","12190","12189","12185","12183","12182","12297","12295","12294","12290","12288","12287","11609","11607","11606","11567","11565","11564","11560","11558","11557","11497","11495","11494","11623","11621","11620","11553","11551","11550","11546","11544","11543","11504","11502","11501","11637","11635","11634","11539","11537","11536","11574","11572","11571","11483","11481","11480","11630","11628","11627","11532","11530","11529","11651","11649","11648","11525","11523","11522","11644","11642","11641","11518","11516","11515","11602","11600","11599","11581","11579","11578","11473","11474","11476","11585","11586","11588"],i=["8304","8220","8297","8150","8311","8157","8318","8164","8325","8171","8332","8178","8339","8185","8346","8192","8353","8199","8360","8206","8367","8213","12191","12184","12296","12289","11608","11566","11559","11496","11622","11552","11545","11503","11636","11538","11573","11482","11629","11531","11650","11524","11643","11517","11601","11580","11475","11587"];void 0!==a&&(-1!==$.inArray(a,r)&&($(".dimension_text_height_"+e).addClass("disabled_value_by"),$("#dimension_text_height_"+e).addClass("disabled_value_by"),$(".dimension_text_width_"+e).removeClass("disabled_value_by"),$("#dimension_text_width_"+e).removeClass("disabled_value_by"),$("#dimension_text_height_"+e).val($("#dimension_text_height_"+t).val()),$(".dimension_text_height_"+t).html("Hauteur de la porte (min 1800 mm - max 2200 mm)"),$(".dimension_text_width_"+t).html("Largeur de la porte + vitre (en mm)")),-1!==$.inArray(a,i)&&($("#dimension_text_height_"+e).removeClass("disabled_value_by"),$(".dimension_text_height_"+e).removeClass("disabled_value_by"),$(".dimension_text_width_"+e).addClass("disabled_value_by"),$("#dimension_text_width_"+e).addClass("disabled_value_by"),$("#dimension_text_width_"+e).val($("#dimension_text_width_"+t).val()),$(".dimension_text_width_"+t).html("Largeur de la porte (min 800 mm - max 1090 mm)"),$(".dimension_text_height_"+t).html("Hauteur de la porte + vitre (en mm)")),-1===$.inArray(a,i)&&-1===$.inArray(a,r)&&($("#dimension_text_height_"+e).removeClass("disabled_value_by"),$(".dimension_text_height_"+e).removeClass("disabled_value_by"),$(".dimension_text_width_"+e).removeClass("disabled_value_by"),$("#dimension_text_width_"+e).removeClass("disabled_value_by"),$(".dimension_text_height_"+t).html("Hauteur de la porte + vitre (en mm)"),$(".dimension_text_width_"+t).html("Largeur de la porte + vitre (en mm)")),i=$("#dimension_text_height_"+e).val(),a=$("#dimension_text_width_"+e).val(),0<parseInt(i))&&0<parseInt(a)&&($("#dimension_text_height_"+e).trigger("change"),$("#dimension_text_width_"+e).trigger("change"))}function CalculoAileOrTapee(e,a,t,r){a=(parseInt(2*a)+parseInt(t))/1e3*e;return r&&updatePriceNdk(a,group),a}function AlterPriceSelect(e,a,r,i){$.map(a,function(e){return e.id}).forEach(function(e){var a,t;"Sans Aile "!=(text=$("label[for="+e+"]").text())&&"Sans tapée "!=text&&0!=(void 0!==i?i:0)&&0!=(void 0!==r?r:0)&&"--"!=(a=text.split(":"))[0]&&(t=(precoTotal=CalculoAileOrTapee(precoTotal=$("#"+e).data("price"),r,i,!1).toFixed(2))-precoTotal*valorReducao,$("label[for="+e+"]").html("<i>"+a[0]+" : + <s>"+precoTotal+' €</s></i><i style="color: var(--red);"> '+t.toFixed(2)+" €</i>"))})}function CalculoDimensaoVidro(e,a,t,r,i,s){try{if(a<e)result=e-a,resultM2=result/1e6,$("div[data-field='"+t+"'] div.field_notice").html("<p>Dimension du verre: "+resultM2+" m²</p>"),updatePriceNdk(774*resultM2*1.2,r),HideNDKFieldError(r);else{if(e==a)throw $("div[data-field='"+t+"'] div.field_notice").html(" "),updatePriceNdk(0,r),'<span class="error alert-danger clear clearfix">Les dimensions de la porte sont supérieures aux dimensions totales.</span>';if(e<a)throw $("div[data-field='"+t+"'] div.field_notice").html(" "),updatePriceNdk(0,r),'<span class="error alert-danger clear clearfix">Les dimensions de la porte sont supérieures aux dimensions totales.</span>'}}catch(e){HideNDKFieldError(r),ShowNDKFieldError(r,e)}}function PregolaGrandLuxLarguraProfundidade(e,a,t){var r=0;for(lame=$("#"+a).val(),Nlames=lame.substring(0,2),r=0;r<e.length;r++)if(parseInt(Nlames)==parseInt(e[r][1]))return $("#dimension_text_height_"+t).val(parseInt(e[r][0])),document.getElementById("dimension_text_height_"+t).value=parseInt(e[r][0]),$("#dimension_text_height_"+t).attr("value",parseInt(e[r][0])),height=e[r][0],width=$("#dimension_text_width_"+t).val(),0<parseInt(width)&&$("#dimension_text_height_"+t).trigger("change"),e[r][0];return 1}function checkPilares(e,a,t){for(lame=$("#ndkcsfield_2292").val(),Nlames=lame.substring(0,2),i=0;i<activitiesDP.length;i++)if(parseInt(Nlames)==parseInt(activitiesDP[i][1]))return ValueMin=parseInt(activitiesDP[i][0])-6e3,ValueMax=parseInt(activitiesDP[i][0])-3e3,parseInt(e)+parseInt(a)<parseInt(ValueMin)&&parseInt(ValueMin),ValueMax/=2,parseInt(ValueMin)<500?ValueMin=500:ValueMin/=2,1500<parseInt(ValueMax)&&(ValueMax=1500),message='<span class="error alert-danger clear clearfix">Pour cette largeur totale, le déplacement vers l\'intérieur doit se situer entre '+parseInt(ValueMin)+"mm et "+parseInt(ValueMax)+"mm.</span>",parseInt($("#text_"+t).val())>parseInt(ValueMax)||parseInt(ValueMin)>parseInt($("#text_"+t).val())?ShowNDKFieldError(t,message):HideNDKFieldError(t),!1;return!0}function ShowFileTechnical(e,a,t,r){$(".pdfplaning").show(),$(".pdftext").text(e+t+"mm x"+a+"mm"),$(".pdfplan").attr("data-pdf","https://priximbattable.net/modules/ndk_advanced_custom_fields/PDF/pdf/PDFNDK.php?length="+t+"&width="+a+"&wall="+r+"&text="+e)}function CalculoAileWindows(e,a,t,r){a=("J"==aluclass_id_field_type[id_product][0]?(parseInt(2*a)+parseInt(2*t))/1e3:(parseInt(2*a)+parseInt(t))/1e3)*e;return r&&updatePriceNdk(a,group),a}function CalculoTapeeWindows(e,a,t,r){a=(parseInt(2*a)+parseInt(t))/1e3*e;return r&&updatePriceNdk(a,group),a}function AlterPriceRadioWindows(r,e,i,s){$.map(e,function(e){return e.id}).forEach(function(e){var a,t;"Sans Aile "!=(text=$("label[for="+e+"]").text())&&"Sans tapée "!=text&&0!=(void 0!==s?s:0)&&0!=(void 0!==i?i:0)&&"--"!=(a=text.split(":"))[0]&&(precoTotal=$("#"+e).data("price"),t=(precoTotal=("T"==r?CalculoTapeeWindows:CalculoAileWindows)(precoTotal,i,s,!1).toFixed(2))-precoTotal*valorReducao,$("label[for="+e+"]").html("<i>"+a[0]+" : + <s>"+precoTotal+' €</s></i><i style="color: var(--red);"> '+t.toFixed(2)+" €</i>"))})}function CalculoPVCsWindows(e,a,t,r){a=parseInt(a)/1e3*(parseInt(t)/1e3)*e;return r&&updatePriceNdk(a,group),a}function AlterPriceCroisillonsWindows(e,a,t){for(var r,i=0;i<e.length;i++)0<(precoTotal=e.eq(i).attr("data-price"))&&(r=(precoTotal=CalculoPVCsWindows(precoTotal,a,t,!1).toFixed(2))-precoTotal*valorReducao,$("#descriptionPrice_"+e.eq(i).attr("data-id-value")).html(" + <s>"+precoTotal+' €</s><span style="color: var(--red);"> '+r.toFixed(2)+" €</span>"))}$("#modalEmbedDevisProd_close").click(function(){return $("#modalEmbedDevisProd").modal("hide"),!1}),$(".embedAluDevisProd").click(function(){var e=$(".form-group:not([class*='disabled_value_by'])").find(".required_field"),a=GetRequiredProgressBar(e),e=GetSelectProgressBar(e);return(progress=e/a*100)<99?($("#modalinfomessage").html("Veuillez remplir tous les champs obligatoires avant de demander un devis."),$("#modalEmbedDevisProd").modal("hide"),$("#modalinfo").modal("show")):(e=$('#ndkcsfields :not(.ndk-accessory-quantity[value="0"])'),myDatas=e.find("input, select, textarea").not(".ndk-accessory-quantity[value=0]").not(".ndk_attribute_select, .dontSend").serialize(),document.getElementById("ndkcsfields")?($("body").append('<div class="ndk-loader" id="ndkloader"><div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div></div>'),$.ajax({type:"POST",url:prestashop.urls.base_url+"modules/ndk_advanced_custom_fields/createNdkcsfields.php",data:myDatas+"&devisproduct=true",dataType:"json",success:function(r){htmlOutput[0]='<div class="print-page-breaker">'+$("#image-block").html()+"</div>",$.ajax({type:"POST",url:baseUrl+"modules/ndk_advanced_custom_fields/createPdf.php",data:{htmlNodes:htmlOutput,idCustomer:r.id_customer,idProduct:r.id_product,idCustomization:r.id_customization,preview_field:r.preview_field,base_url:baseUrl,images:"",fonts:allFonts},dataType:"html",success:function(){$("#ndkloader").remove(),$("#modalEmbedDevisProd").modal("show"),$("#generateproductid").val(r.id_product);var e=$("#cat_id_prod").val(),a=$("#name_title_product").html();let t=$(".productPriceUp").html();t=(t=(t=t.replace("€","").replace(/\s/g,"")).replace(",",".")).replace("&nbsp;","").replace("&nbsp;",""),t=parseFloat(t),dataLayer.push({ecommerce:null}),dataLayer.push({event:"add_to_cart",ecommerce:{currency:"EUR",value:t,items:[{item_id:e,item_name:a}]}}),console.log(dataLayer)}})}})):$("#modalEmbedDevisProd").modal("show")),!1});