function metaleffect(e,t,a,i,r,o,n,s,l,d,c,p,u,g){if("function"==typeof metaleffect_Override)return metaleffect_Override(e,t,a,i,r,o,n,s,l,d,c,p,u,g);console.log(n);var h=[],m=((g=g||!1)?(h.effect="",h.fill=e+" ;stroke: "+a+"; stroke-width:0.8",h.fillShadow="",h.fillLight=""):(h.effect='<linearGradient class="svggradient" data-group-text="'+o+'"  id="metalEffect_'+o+'" x1="0%" y1="100%" y2="10%" x2="80%">',h.effect+='<stop stop-color="'+e+'" offset="0%"></stop>',h.effect+='<stop stop-color="'+t+'" offset="30%"></stop>',h.effect+='<stop stop-color="'+e+'" offset="70%"></stop>',h.effect+='<stop stop-color="'+t+'" offset="100%"></stop>',h.effect+="</linearGradient>",h.effect+='<filter class="svgfilter" data-group-text="'+o+'" id="shadow_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feGaussianBlur result="shadow" stdDeviation="1 0.5"></feGaussianBlur><feOffset dx="0" dy="2"></feOffset></filter>',h.effect+='<filter class="svgfilter" data-group-text="'+o+'"  id="shadow2_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0.2 0.2"></feGaussianBlur><feOffset dx="0" dy="-0.7"></feOffset></filter>',h.effect+='<filter class="svgfilter" data-group-text="'+o+'" id="light_'+o+'" height="140%" y="20%" width="140%" x="-30%"><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feGaussianBlur result="shadow" stdDeviation="0 0"></feGaussianBlur><feOffset dy="-1" dx="0"></feOffset></filter>',h.fill=(u?"url(#texture_"+o+")":"url(#metalEffect_"+o+")")+" ;stroke: "+a+"; stroke-width:0.8",h.fillShadow=i+"; filter: url(#shadow_"+o+")",h.fillLight=r+"; filter: url(#light_"+o+")"),textPathEffect="",svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" class="textareaSvg composition_element" viewBox="0 0 '+s+" "+(l+5)+'" preserveAspectRatio="xMidYMid meet" style="'+style+'" height="'+l+'" width="'+s+'">',svg+=h.effect,fontUrl=(fontUrl=(fontUrl=d.replace(/\s/g,"+")).replace(/\"/g,"")).replace(/\'/g,""),fullFontUrl="https://fonts.googleapis.com/css?family="+fontUrl,styleContent="@import url('"+fullFontUrl+"')",svg+='<defs><style type="text/css" >'+styleContent+"</style></defs>",textPathEffect+=h.effect,n.split("\n"));if(1<m.length){y=1;for(var f=0;f<m.length;f++)svglines+="<tspan "+txtanchord+' x="'+x+'" y="'+c*y+'">'+m[f].escape()+"</tspan>",y++}return 1!=p||g?u&&(svg=(svg+='<pattern id="texture_'+o+'" patternUnits="userSpaceOnUse" viewBox="0 0 '+s+" "+(l+5)+'" height="'+l+'" width="'+s+'">')+'<image xlink:href="'+u+'" height="'+l+'" width="'+s+'"/></pattern>'):(svg=(svg+='<text data-font-family="'+d+'" id="svgText_'+o+'-light" x="10" y="10" style="fill:'+h.fillLight+';"font-family:'+d+" ;>"+svglines+"</text>")+'<text data-font-family="'+d+'" id="svgText_'+o+'-shadow" x="10" y="10" style="fill:'+h.fillShadow+";font-family:"+d+' ;">'+n+"</text>",textPathEffect=(textPathEffect+='<text data-font-family="'+d+'" data-group-text="'+o+'" id="svgText_'+o+'-light" style="font-family:'+d+" ;font-size:"+ +c+"px; fill:"+h.fillLight+';">'+svglines+"</text>")+'<text data-font-family="'+d+'" data-group-text="'+o+'" id="svgText_'+o+'-shadow" style="font-family:'+d+" ;font-size:"+ +c+"px; fill:"+h.fillShadow+';">'+svglines+"</text>"),svg=(svg=(svg+='<text data-font-family="'+d+'" id="svgText_'+o+'"  x="10" y="10" style="fill:'+h.fill+";font-family:"+d+';">')+svglines)+"</text>"+"</svg>",h.textPathEffect=textPathEffect,h.svg=svg,h}$(document).on("click",".addText",function(e){e.preventDefault(),maxlenght=$(this).attr("data-max"),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),blend=$(this).attr("data-blend"),ppcprice=$(this).attr("data-ppcprice"),others=$(this).parent().find(".designer-item"),number=others.length+1,$(this).parent().find(".designer-item").slideUp(),textItem='<div class="designer-item-container"><h4 data-target="#item-'+group+"-"+parseInt(number)+'" id="toggler-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerTextText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'"><textarea id="text-item-'+group+"-"+number+'" data-lines="1" data-max="'+maxlenght+'" data-group="'+group+'" data-number="'+number+'" data-zindex="'+zindex+'" data-id="'+target+'" data-view="'+view+'" data-dragdrop="'+dragdrop+'" data-resizeable="'+resizeable+'" data-rotateable="'+rotateable+'" data-price="'+price+'" data-blend="'+blend+'" data-ppcprice="'+ppcprice+'" data-pattern="" class="form-control textzone ndktextarea textItem"></textarea>',0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),textItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),textItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small" data-group-target="'+group+"-"+parseInt(number)+'" data-group="'+group+'"><span>'+designerRemoveText+"</span></a></div></div>",textItem=$(this).parent().find(".itemsBlock").append(textItem),scrollToNdk(textItem,800),initText($("#text-item-"+group+"-"+number)),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),makeSortable()}),$(document).on("click",".addTextArea",function(e){e.preventDefault(),maxlenght=$(this).attr("data-max"),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),ppcprice=$(this).attr("data-ppcprice"),blend=$(this).attr("data-blend"),others=$(this).parent().find(".designer-item"),number=others.length+1,$(this).parent().find(".designer-item").slideUp(),textItem='<div class="designer-item-container"><h4 data-target="#item-'+group+"-"+parseInt(number)+'" id="toggler-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerTextText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'"><textarea id="text-item-'+group+"-"+number+'" data-lines="1" data-max="'+maxlenght+'" data-group="'+group+'" data-number="'+number+'" data-zindex="'+zindex+'" data-id="'+target+'" data-view="'+view+'" data-dragdrop="'+dragdrop+'" data-resizeable="'+resizeable+'" data-rotateable="'+rotateable+'" data-price="'+price+'" data-ppcprice="'+ppcprice+'" data-blend="'+blend+'" data-pattern="" class="form-control textzone ndktextarea type_textarea textItem"></textarea>',0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),textItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),textItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small" data-group="'+group+'" data-group-target="'+group+"-"+parseInt(number)+'"><span>'+designerRemoveText+"</span></a></div></div>",textItem=$(this).parent().find(".itemsBlock").append(textItem),scrollToNdk(textItem,800),initText($("#text-item-"+group+"-"+number)),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),makeSortable()}),$(document).on("click",".addImg",function(e){e.preventDefault(),group=$(this).attr("data-group"),zindex=$(this).attr("data-zindex"),target=$(this).attr("data-id"),view=$(this).attr("data-view"),dragdrop=$(this).attr("data-dragdrop"),resizeable=$(this).attr("data-resizeable"),rotateable=$(this).attr("data-rotateable"),price=$(this).attr("data-price"),blend=$(this).attr("data-blend"),others=$(this).parent().find(".designer-item"),number=others.length+1,(clonedUpload=$(this).parent().find(".ndkhiddenuploadfile").clone()).removeClass("ndkhiddenuploadfile").addClass("imgItem"),clonedUpload.find(".img-value").attr("data-group",group+"-"+number),(clonedLibrary=$(this).parent().find(".ndkhiddenimglibrary").clone()).removeClass("ndkhiddenimglibrary").addClass("imgItem").attr("id","main-"+group+"-"+number),clonedLibrary.find(".img-value").attr("data-group",group+"-"+number),$(this).parent().find(".designer-item").slideUp(),imgItem='<div class="designer-item-container"><h4 id="toggler-'+group+"-"+parseInt(number)+'"  data-target="#item-'+group+"-"+parseInt(number)+'" class="itemToggler">'+designerImgText+"<span> "+parseInt(number)+'</span></h4><div id="item-'+group+"-"+parseInt(number)+'" class="designer-item clearfix clear" data-number="'+parseInt(number)+'">'+clonedUpload.html()+clonedLibrary.html(),0<$(this).parent().find(".orientation_selection").length&&(orientable_block=$(this).parent().find(".orientation_selection").html(),imgItem+='<div data-group-target="'+group+"-"+parseInt(number)+'" class="clear clearfix orientation_selection">'+orientable_block+"</div>"),imgItem+='<a href="#" class="remove-item-block button btn pull-right btn-default button-small"  data-group="'+group+'" data-group-target="'+group+"-"+parseInt(number)+'"><span>'+designerRemoveText+"</span></a></div></div>",imgItem=$(this).parent().find(".itemsBlock").append(imgItem),scrollToNdk(imgItem,800),$("#ndkcsfield_"+group).val(designerValue).trigger("keyup"),$(".ndk_selector").each(function(){$(this).setNdkSelector()}),makeSortable()}),$(document).on("click",".itemToggler",function(){$($(this).attr("data-target")).slideToggle()}),String.prototype.escape=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(e){return t[e]||e})},$(document).on("click",".submitTextItem",function(){if(group=parseInt($(this).parent().parent().find(".ndktextarea:eq(0)").attr("data-group")),number=$(this).parent().parent().find(".ndktextarea").attr("data-number"),zindex=$(this).parent().parent().find(".textzone").attr("data-zindex"),price=$(this).parent().parent().find(".ndktextarea").attr("data-price"),ppcprice=$(this).parent().parent().find(".ndktextarea").attr("data-ppcprice"),blend=$(this).parent().parent().find(".ndktextarea").attr("data-blend"),view=$(this).parent().parent().find(".ndktextarea").attr("data-view"),dragdrop=$(this).parent().parent().find(".ndktextarea").attr("data-dragdrop"),resizeable=$(this).parent().parent().find(".ndktextarea").attr("data-resizeable"),rotateable=$(this).parent().parent().find(".ndktextarea").attr("data-rotateable"),(charsCount=0)<$(this).parent().find(".noborder").length?(texte="",$(this).parent().find(".noborder").each(function(){""!=$(this).val()&&(texte+=$(this).val()+" ",charsCount+=$(this).val().replace(/\ /g,"").length)})):texte=$(this).parent().find(".textarea").text(),""==texte||" "==texte?(price=0,texte=""):price=0<ppcprice?ppcprice*charsCount:$(this).parent().parent().find(".ndktextarea").attr("data-price"),$(this).parent().parent().find(".ndktextarea").val(texte).trigger("keyup"),$(this).parent().find(".textarea").css({width:"auto",height:"auto",display:"table"}),""!=texte&&" "!=texte||(price=0,texte=""),verticalPadding=10,horizontalPadding=0,$(this).parent().find(".status_counter").hide(),height=$(this).parent().find(".textarea").innerHeight()-parseFloat(verticalPadding),width=$(this).parent().find(".textarea").innerWidth()-parseFloat(horizontalPadding)-scrollbarWidth,$(".status_counter").hide(),0<$(".zone_limit[data-group='"+group+"']").length&&0<$(".view_tab[data-view='"+view+"']").length&&0<$(this).parent().find("textarea.noborder").length&&(container=".zone_limit[data-group='"+group+"']",zwidth=$(container).width(),zheight=$(container).height(),$(this).parent().find(".textarea").css({width:zwidth}),width=zwidth),svglines="",fontSize=parseFloat($(this).parent().css("font-size")),alignment=$(this).parent().find(".texteditor").css("text-align"),x=10,txtanchord='text-anchor="start"',"left"==alignment?(x=10,txtanchord='text-anchor="start"'):"center"==alignment?(x=width/2,txtanchord='text-anchor="middle"'):"right"==alignment&&(x=width,txtanchord='text-anchor="end"'),0<$(this).parent().find("textarea.noborder").length){var e=$(this).parent().find("textarea.noborder").val().split("\n");y=1;for(var t=0;t<e.length;t++)svglines+="<tspan "+txtanchord+' x="'+x+'" y="'+fontSize*y+'">'+e[t].escape()+"</tspan>",y++;textToWrite=$(this).parent().find("textarea.noborder").val()}else textToWrite="",y=1,$(this).parent().find(".noborder").each(function(){textToWrite+=$(this).val()+" \n ",y++});style=$(this).parent().attr("style").replace('"',"'").replace('"',"'");var a=!1,i=[];i.effect="",i.fill="",i.fillLight="",i.fillShadow="",fontFamily=(fontFamily=$(this).parent().find(".texteditor").css("font-family")).replace('"',"'").replace('"',"'"),i="rgb(255, 215, 0)"==$(this).parent().find(".texteditor").css("color")?(a=!0,metaleffect("#efd8a2","#a28156","#efd8a2","#2f1f05","#fff3c6",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"rgb(192, 192, 192)"==$(this).parent().find(".texteditor").css("color")?(a=!0,metaleffect("#888888","#dedede","#F5F5F5","#444444","#dedede",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"concavMe"==$(this).parent().find(".texteditor").attr("data-effect")?(color1=$(this).parent().find(".texteditor").css("color"),color2=darkerColor($(this).parent().find(".texteditor").css("color"),.2),shadowcolor=darkerColor($(this).parent().find(".texteditor").css("color"),.4),lightcolor=lighterColor($(this).parent().find(".texteditor").css("color"),.2),strokecolor=darkerColor($(this).parent().find(".texteditor").css("color"),.2),a=!0,metaleffect(color2,color1,strokecolor,lightcolor,shadowcolor,group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):"convexMe"==$(this).parent().find(".texteditor").attr("data-effect")?(color1=$(this).parent().find(".texteditor").css("color"),color2=lighterColor($(this).parent().find(".texteditor").css("color"),.2),shadowcolor=darkerColor($(this).parent().find(".texteditor").css("color"),.2),lightcolor=lighterColor($(this).parent().find(".texteditor").css("color"),.3),strokecolor=lighterColor($(this).parent().find(".texteditor").css("color"),.2),a=!0,metaleffect(color1,color2,strokecolor,shadowcolor,lightcolor,group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1)):(color1=$(this).parent().find(".texteditor").css("color"),strokecolor=$(this).parent().find(".texteditor").attr("stroke-color"),a=!1,metaleffect(color1,color1,strokecolor,"transparent","transparent",group+"-"+number,textToWrite,width,height,fontFamily,fontSize,a,!1,!0)),designCompo(i.svg,group+"-"+number,view,zindex,dragdrop,resizeable,rotateable,width,height,"svg",blend),0<$(this).parent().find("textarea.noborder").length&&(svg_textMultiline("svgText_"+group+"-"+number,textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x),svg_textMultiline("svgText_"+group+"-"+number+"-shadow",textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x),svg_textMultiline("svgText_"+group+"-"+number+"-light",textToWrite.replace(/\n/g," ± "),width,fontSize,txtanchord,x)),""!=textToWrite&&updatePriceNdk(price,parseInt(group))}),$(document).on("click",".remove-item-block",function(e){e.preventDefault(),group=$(this).attr("data-group-target"),others=$(this).parent().parent().find(".designer-item"),$("#visual_"+group).remove(),$("#item-"+group).remove(),$("#toggler-"+group).remove(),$("#layer-edit-"+group).remove(),idInput=group.split("-"),1<others.length?$("#ndkcsfield_"+idInput[0]).val(designerValue).trigger("keyup"):($("#ndkcsfield_"+idInput[0]).val("").trigger("keyup"),updatePriceNdk(0,$(this).attr("data-group"))),$(this).hide(),rootGroupBlock=$(".form-group[data-field='"+group+"']:not(.submitContainer)"),$("#ndkcsfield_"+idInput[0]).trigger("keyup"),checkLayerChanges(),makeSortable()}),$(document).on("click",".remove-img-item",function(e){e.preventDefault(),group=$(this).attr("data-group-target"),others=$(this).parent().parent().find(".designer-item"),$("#visual_"+group).remove(),$("#layer-edit-"+group).remove(),$(this).parent().find(".selected-value").removeClass("selected-value"),idInput=group,$("#ndkcsfield_"+idInput[0]).val("").trigger("keyup"),$(this).hide(),$(this).hasClass("removePrice")&&($("#ndkcsfield_"+group).val(""),updatePriceNdk(0,group)),checkLayerChanges(),makeSortable()});var pad=function(e,t){for(e+="";e.length<t;)e="0"+e;return e},changeColor=function(e,t,a){e=(e=e.replace(/^\s*|\s*$/,"")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var t=Math.round(256*t)*(a?-1:1),i=e.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=i&&null!=i[4]?i[4]:null,e=i?[i[1],i[2],i[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/);return i?"rgb"+(null!==r?"a":"")+"("+Math[a?"max":"min"](parseInt(e[0],10)+t,a?0:255)+", "+Math[a?"max":"min"](parseInt(e[1],10)+t,a?0:255)+", "+Math[a?"max":"min"](parseInt(e[2],10)+t,a?0:255)+(null!==r?", "+r:"")+")":["#",pad(Math[a?"max":"min"](parseInt(e[0],10)+t,a?0:255).toString(16),2),pad(Math[a?"max":"min"](parseInt(e[1],10)+t,a?0:255).toString(16),2),pad(Math[a?"max":"min"](parseInt(e[2],10)+t,a?0:255).toString(16),2)].join("")},lighterColor=function(e,t){return changeColor(e,t,!1)},darkerColor=function(e,t){return changeColor(e,t,!0)};function setLetterWidth(){if("function"==typeof setLetterWidth_Override)return setLetterWidth_Override();$(".customFontLetter").each(function(){parentWidth=$(this).parent().width(),elWidth=$(this).width(),$(this).width(elWidth/parentWidth*100+"%")}),equalheight(".customFontLetter")}function convertPercentEl(e){if("function"==typeof convertPercentEl_Override)return convertPercentEl_Override(e);container=e.parent(),containerWidth=container.width(),containerHeight=container.height(),elWidth=e.width(),elHeight=e.height(),elLeft=e.css("left").replace("px",""),elTop=e.css("top").replace("px",""),widthPercent=elWidth/containerWidth*100+"%",elHeight,containerHeight,heightPercent="auto",leftPercent=elLeft/containerWidth*100+"%",topPercent=elTop/containerHeight*100+"%",e.css({width:widthPercent,height:heightPercent,left:leftPercent,top:topPercent,margin:""})}function registerInitialValues(){if("function"==typeof registerInitialValues_Override)return registerInitialValues_Override();$('.fieldPane > [id^="main-"]').each(function(){splittedGroup=$(this).attr("id").split("-"),group=splittedGroup[1]+(void 0!==splittedGroup[2]?"-"+splittedGroup[2]:""),initialValues[group]=[],0<$(this).find(".img-item-row").length&&initialValues[group].push($(this).find(".img-item-row")),0<$(this).find(".color-ndk").length&&initialValues[group].push($(this).find(".color-ndk")),0<$(this).find(".ndk-select").length&&initialValues[group].push($(this).find(".ndk-select")),0<$(this).find(".ndk-radio").length&&initialValues[group].push($(this).find(".ndk-radio")),0<$(this).find(".ndk-checkbox").length&&initialValues[group].push($(this).find(".ndk-checkbox"))})}function loadInitialValues(){if("function"==typeof loadInitialValues_Override)return loadInitialValues_Override();for(idGroup in initialValues)if(void 0!==initialValues[idGroup]&&void 0!==initialValues[idGroup][0])for(var e=0;e<initialValues[idGroup][0].length;e++)element=initialValues[idGroup][0][e],container=$(".form-group[data-field='"+idGroup+"']"),$(element).hasClass("img-item-row")?0!=(idValue=$(element).find(".img-value:eq(0)").attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .img-value[data-id-value='"+idValue+"']").length&&($(element).removeClass("selected-value"),$(element).find(".img-value").removeClass("selected-value"),$(element).find(".svg-container").removeClass("selected-svg"),$(".form-group[data-field='"+idGroup+"'] .img-value").last().parent().after($(element)[0].outerHTML)):$(element).hasClass("color-ndk")?0!=(idValue=$(element).attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .color-ndk[data-id-value='"+idValue+"']").length&&($(element).removeClass("selected-color"),$(".form-group[data-field='"+idGroup+"'] .color-ndk").last().after($(element)[0].outerHTML)):$(element).is("select")&&$(element).find("option").each(function(){option=$(this),0!=(idValue=$(option).attr("data-id-value"))&&"undefined"!=typeof idValue&&""!=idValue&&0==$(".form-group[data-field='"+idGroup+"'] .ndk-select > option[data-id-value='"+idValue+"']").length&&$(".form-group[data-field='"+idGroup+"'] select").append($(option)[0].outerHTML)});setTimeout(function(){equalheight(".img-item-row")},1e3)}function makeGroupFieldsSlide(){if("function"==typeof makeGroupFieldsSlide_Override)return makeGroupFieldsSlide_Override();$(".groupFieldBlock").addClass("sliderBlock"),$(".groupFieldBlock > .form-group").addClass("ndkackFieldItem"),setTimeout(function(){ndkCfShowSlide($(".sliderBlock .ndkackFieldItem:visible:eq(0)"))},500),$(".sliderBlock").each(function(){0<(allItems=$(this).find(".ndkackFieldItem")).length?1<allItems.length&&(pager='<p class="ndkcfPager">',allItems.each(function(){pager+='<span data-view="'+$(this).attr("data-view")+'" target="'+$(this).attr("data-iteration")+'" class="ndkcfPagerItem"></span>'}),pager+="</p>",$(".ndkcfPager").remove(),$(this).append(pager).addClass("multipleSlides")):$(this).remove()}),$(".groupFieldBlock").css("padding-bottom",$(".sliderBlock .ndkackFieldItem:visible:eq(0)").innerHeight()),$(".groupFieldBlock.sliderBlock").find(".ndkcfnav").remove(),$(".groupFieldBlock.sliderBlock.multipleSlides").append('<p class="ndkcfnav"><a class="prevNdkcfItem">&nbsp;</a> <a class="nextNdkcfItem">&nbsp;</a></p>'),$(document).on("click",".nextNdkcfItem",function(){found=!1,current=$(this).parent().parent().find(".ndkackFieldItem.activeItem:eq(0)"),(others=$(this).parent().parent().find(".ndkackFieldItem:visible:not(.activeItem)")).each(function(){parseFloat($(this).attr("data-iteration"))>parseFloat(current.attr("data-iteration"))&&!found&&(ndkCfShowSlide($(this),"rtl"),found=!0)}),found||(ndkCfShowSlide(others.first(),"rtl"),found=!0)}),$(document).on("click",".prevNdkcfItem",function(){current=$(this).parent().parent().find(".ndkackFieldItem.activeItem:eq(0)"),others=$(this).parent().parent().find(".ndkackFieldItem:visible:not(.activeItem)"),bigger=-1,others.each(function(){parseFloat($(this).attr("data-iteration"))<parseFloat(current.attr("data-iteration"))&&parseFloat($(this).attr("data-iteration"))>bigger&&(bigger=parseFloat($(this).attr("data-iteration")),target=$(this))}),"undefined"!=typeof target?ndkCfShowSlide(target,"ltr"):ndkCfShowSlide(others.last(),"ltr")}),$(document).on("click",".ndkcfPagerItem",function(){ndkCfShowSlide($(this).parent().parent().find(".ndkackFieldItem[data-iteration='"+$(this).attr("target")+"']"))}),$(".sliderBlock00").swipe({swipe:function(e,t,a,i,r,o){"left"==t?$(this).find(".nextNdkcfItem").trigger("click"):"right"==t&&$(this).find(".prevNdkcfItem").trigger("click")},threshold:0}),$(".sliderBlock .ndkackFieldItem").resize(function(){$(this).parent().css("padding-bottom",$(".ndkackFieldItem.activeItem:eq(0)").innerHeight())})}function ndkCfShowSlide(e,t){if("function"==typeof ndkCfShowSlide_Override)return ndkCfShowSlide_Override(e,t);t=t||"ltr",$(".img-item-row").css("height",""),e.parent().find(".ndkackFieldItem").removeClass("activeItem"),e.parent().find(".ndkackFieldItem").removeClass("slideInRight").removeClass("slideInLeft"),"rtl"==t?e.parent().find(".ndkackFieldItem").addClass("slideInRight").removeClass("slideInLeft"):e.parent().find(".ndkackFieldItem").removeClass("slideInRight").addClass("slideInLeft"),e.addClass("activeItem"),e.parent().find(".ndkcfPagerItem").removeClass("activePager"),e.parent().find(".ndkcfPagerItem[target='"+e.attr("data-iteration")+"']").addClass("activePager"),setTimeout(function(){equalheight(".img-item-row"),e.parent().css("padding-bottom",$(".ndkackFieldItem.activeItem:eq(0)").innerHeight()),e.parent().find(".ndkackFieldItem").removeClass("slideInRight").removeClass("slideInLeft")},500)}function checkLayerChanges(){if("function"==typeof checkLayerChanges_Override)return checkLayerChanges_Override();0==$("#layer-block").find(".editThisLayer").length?$("#layer-block").hide():1==$("#layer-block").find(".editThisLayer").length&&0==$("#layer-block").find(".layer_title").length?$("#layer-block").show().prepend('<p class="layer_title">'+selectLayer+"</p>"):0<$("#layer-block").find(".editThisLayer").length&&$("#layer-block").show()}function makeSortable(){if("function"==typeof makeSortable_Override)return makeSortable_Override();$(".itemsBlock").sortable({items:".designer-item-container",handle:".itemToggler",cursor:"move",opacity:.6,start:function(e,t){$(".resetZones").trigger("click")},stop:function(e,t){refZindex=t.item.parent().parent().parent().find("button:eq(0)").attr("data-zindex"),(others=t.item.parent().find(".designer-item-container")).each(function(){$(this).attr("addzindex",$(others).index($(this))),block=$(this).find(".designer-item"),target_key=block.attr("id").replace("item-",""),(target=$("#visual_"+target_key)).css("z-index",refZindex+$(others).index($(this)))})}})}function RemoveSelectOptions(e,t){var a;inputa=$("li[data-id-value='"+e+"']").find(".ndk-accessory-quantity:eq(0)"),0!=parseInt(inputa.val())&&($("li[data-id-value='"+e+"']").removeClass("selected-accessory"),inputa.val(0).trigger("change"),e=$("#ndk-accessory-quantity-"+e).attr("data-price"),a=$("#price_"+t).val(),$("#price_"+t).val(parseInt(a)-parseInt(e)))}function checaSeImgExiste(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),404!=t.status}function makeSocialCompo(e,t){if("function"==typeof makeSocialCompo_Override)return makeSocialCompo_Override(e,t);1==showSocialTools&&($.prototype.fancybox&&t?(data=$(".ndkShareCompo").html(),$.fancybox.open([{type:"inline",autoScale:!1,minHeight:30,width:"80%",height:"80%",showCloseButton:!1,autoDimensions:!1,content:'<div class="popupSocialContainer clear clearfix">'+data+"</div>",beforeShow:function(){setSharedButtons(e)}}],{padding:0})):setSharedButtons(e))}function setSharedButtons(e){if("function"==typeof setSharedButtons_Override)return setSharedButtons_Override(e);sharing_url=addParameterToURL("id_ndk_customization_field_configuration="+e,sharing_url=removeParamUrl("id_ndk_customization_field_configuration",window.location.href)),sharing_url=addParameterToURL("date="+$.now(),sharing_url),sharing_name="",img_url=$(".current_config_img").attr("src"),$(".copyLinkInput").text(sharing_url),""!=img_url?$(".shareImgDl").attr("href",img_url).show():$(".shareImgDl").hide(),$.ajax({async:!0,type:"GET",global:!1,dataType:"html",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_conf:e,action:"getConfImage"},success:function(e){var t=$("#image-url-0").val();$(".current_config_img:eq(0)").attr("src",t).show(),$("button.ndk-social-sharing:not(.shareImgDl), button.social-sharing").on("click",function(){if((type=$(this).attr("data-type")).length)switch(type){case"twitter":window.open("https://twitter.com/intent/tweet?text="+sharing_name+" "+encodeURIComponent(sharing_url),"sharertwt","toolbar=0,status=0,width=640,height=445");break;case"facebook":window.open("http://www.facebook.com/sharer.php?u="+sharing_url,"sharer","toolbar=0,status=0,width=660,height=445");break;case"google-plus":window.open("https://plus.google.com/share?url="+sharing_url,"sharer","toolbar=0,status=0,width=660,height=445");break;case"pinterest":window.open("http://www.pinterest.com/pin/create/button/?media="+t+"&url="+sharing_url,"sharerpinterest","toolbar=0,status=0,width=660,height=445");break;case"copyLink":copyToClipboard(".copyLinkInput:eq(0)")}})}})}function copyToClipboard(e){var t=$("<input>");$("body").append(t),t.val($(e).text()).select(),document.execCommand("copy"),t.remove()}function addParameterToURL(e,t){return _url=t,_url+=(-1!==_url.indexOf("?")?"&":"?")+e}function removeParamUrl(e,t){var a=t.split("?")[0],i=[],t=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==t){for(var r=(i=t.split("&")).length-1;0<=r;--r)i[r].split("=")[0]===e&&i.splice(r,1);a+=0<i.lenght?"?"+i.join("&"):""}return a}function ndkImagetoDataURLForSvg(e,t){var a=new Image;-1!==e.indexOf("http")?(a.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0),t(a)},a.src=e):t(!1)}function png2svg(e,t,a,i){var r={corsenabled:!1,ltres:1,qtres:1,pathomit:1,rightangleenhance:!0,colorsampling:2,numberofcolors:2,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:0,linefilter:!0,scale:1,roundcoords:1,viewbox:!0,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:10};e?(width=e.naturalWidth,height=e.naturalHeight,textureEffect=e.src,background=(background='<defs><pattern xmlns="http://www.w3.org/2000/svg" id="texture_'+i+'" patternUnits="userSpaceOnUse" height="'+height+'" width="'+width+'" overflow="visible">')+'<image xlink:href="'+textureEffect+'" height="'+height+'" width="'+width+'" x="0" y="0" /></pattern></defs>',ImageTracer.imageToSVG(t,function(e){$("#visual_"+i).prepend(e),$("#visual_"+i).find("path").attr("fill","url(#texture_"+i+")"),svgNode=$("#visual_"+i).find("svg")[0],newSvgStr=svgNode.outerHTML,fullSvgStr=newSvgStr.replace('xml:space="preserve">','xml:space="preserve">'+background),imgNode='<object class="replaced-svg composition_element" data="data:image/svg+xml;base64,'+window.btoa(fullSvgStr)+'" type="image/svg+xml"><img src="maskUrl"/></object>',$("#visual_"+i).prepend(imgNode),$("#visual_"+i).find("svg").remove()},r)):ImageTracer.imageToSVG(t,function(e){$("#visual_"+i).find("svg").remove(),$("#visual_"+i).prepend(e),$("#visual_"+i).find("path").attr("fill",a),$("#visual_"+i).find("svg").addClassSVG("replaced-svg composition_element").attr("id","traced_svg_"+i)},r)}function trocaCorStore(e,t){console.log("campoStore "+e),console.log("novaImagem "+t),1==checaSeImgExiste("https://"+document.domain+"/img/fechos_pergola/"+t+".png")&&(void 0!==zindexImgs[e]?$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_fechos_tecidos aluclass_"+e+"' style='z-index: 1;'><img class='composition_element img-reponsive aluclass_"+e+"' src='/img/fechos_pergola/"+t+".png'/></div>"):$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_fechos_tecidos aluclass_"+e+"' style='z-index: 2;'><img class='composition_element img-reponsive aluclass_"+e+"' src='/img/fechos_pergola/"+t+".png'/></div>"))}$(document).on("keyup",".visual-text-custom-font",function(){group=$(this).attr("data-group"),text=$(this).val(),textArray=text.split(""),htmlLetter="";for(var e=0;e<textArray.length;e++)htmlLetter+='<span class="customFontLetter customFont_'+group+"_letter_"+textArray[e]+'">'+textArray[e]+"</span>";$.when($(this).parent().find(".custom-font-rendering").html(htmlLetter)).then(function(){$(".customFontLetter").each(function(){content=(content=$(this).css("content")).replace('url("',"").replace('")',""),$(this).html('<img src="'+content+'"/>'),convertPercentEl($(this))})})}),$(document).on("click",".submitCSText",function(){group=$(this).parent().find(".visual-text-custom-font").attr("data-group"),zindex=$(this).parent().find(".visual-text-custom-font").attr("data-zindex"),price=$(this).parent().find(".visual-text-custom-font").attr("data-price"),ppcprice=$(this).parent().find(".visual-text-custom-font").attr("data-ppcprice"),blend=$(this).parent().find(".visual-text-custom-font").attr("data-blend"),view=$(this).parent().find(".visual-text-custom-font").attr("data-view"),dragdrop=$(this).parent().find(".visual-text-custom-font").attr("data-dragdrop"),resizeable=$(this).parent().find(".visual-text-custom-font").attr("data-resizeable"),rotateable=$(this).parent().find(".visual-text-custom-font").attr("data-rotateable"),charsCount=0,""==(texte=$(this).parent().find(".visual-text-custom-font").text())||" "==texte?(price=0,texte=""):price=0<ppcprice?ppcprice*charsCount:$(this).parent().find(".visual-text-custom-font").attr("data-price"),""!=texte&&" "!=texte||(price=0,texte=""),height=$(this).parent().find(".custom-font-rendering").innerHeight(),width=$(this).parent().find(".custom-font-rendering").innerWidth(),html='<div id="cecft_'+group+'" class="composition_element customFontTextElement" style="height:'+height+"px; width:"+width+'px">'+$(this).parent().find(".custom-font-rendering").html()+"</div>",updatePriceNdk(price,parseInt(group)),$.when(designCompo(html,group,view,zindex,dragdrop,resizeable,rotateable,width,height,"svg",blend)).then(function(){$("#cecft_"+group).css({height:"",width:""})})}),$("audio").on("play",function(){$(this).attr("id");$("audio").not(this).each(function(e,t){t.pause()})}),$("video").on("play",function(){$(this).attr("id");$("video").not(this).each(function(e,t){t.pause()})}),$(document).on("click",".form-group",function(){field=$(this).attr("data-field"),$(".editThisLayer").removeClass("layerActive"),$(".resetZones").remove(),$(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),(0<(zone=$(".zone_limit[data-group='"+field+"'], .absolute-visu[data-group='"+field+"']")).find(".ui-resizable, .ui-draggable, .rotatable").length||zone.is(".ui-resizable",".ui-draggable",".rotatable"))&&!$(this).hasClass("activeFormGroup_ooooooo")?($(".form-group").removeClass("activeFormGroup"),$(this).addClass("activeFormGroup"),$(".zone_limit, .absolute-visu").addClass("discretZone"),zone.addClass("activeZone").removeClass("discretZone"),$("#layer-edit-"+field).addClass("layerActive"),$(".editThisLayer[data-group*='"+field+"-']").addClass("layerActive").find(".ui-resizable, .ui-draggable, .rotatable").trigger("mouseover"),$("#layer-block").append('<span class="resetZones">'+resetText+"</span>")):($(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),$(".editThisLayer").removeClass("layerActive"),$(".form-group").removeClass("activeFormGroup"),$(".resetZones").remove())}),$(document).on("click",".editThisLayer",function(){group=$(this).attr("data-group").split("-"),$(".editThisLayer").removeClass("layerActive"),$(this).addClass("layerActive"),$(".form-group[data-field='"+group[0]+"']").trigger("click")}),$(document).on("mousedown",".absolute-visu",function(){$(this).is(".ui-resizable",".ui-draggable",".rotatable")&&(group=$(this).attr("data-group").split("-"),$(".editThisLayer").removeClass("layerActive"),$(this).addClass("activeZone"),$(".form-group[data-field='"+group[0]+"']").trigger("click"))}),$(document).on("click",".resetZones",function(){$(".zone_limit, .absolute-visu").removeClass("activeZone").removeClass("discretZone"),$(".editThisLayer").removeClass("layerActive"),$(".form-group").removeClass("activeFormGroup"),$(".resetZones").remove(),snapShotLight()}),$(document).on("keydown",'#ndkcsfields input[type="text"]',function(e){13!=e.keyCode&&9!=e.keyCode||($(this).focus(),e.preventDefault())}),$(document).on("click",".colse-comb-tab",function(){$(this).parent().parent().parent().find(".combColumn").removeClass("openedCol").css("height","")}),$(document).on("click",".ndkcf_col_title",function(){$(this).parent().hasClass("openedCol")||($(this).parent().parent().find(".combColumn").removeClass("openedCol").css("height",""),originalHeight=$(this).parent().innerHeight(),refPosition=$(this).parent().position().top,$.when($(this).parent().addClass("openedCol")).done(function(){combHeight=$(this).parent().find(".combRowList").innerHeight(),$(this).parent().css("height",combHeight+originalHeight+50+"px"),$(".combColumn").each(function(){$(this).position().top==refPosition&&$(this).css("height",combHeight+originalHeight+50+"px")})}),equalheight($(this).parent().find(".combRow")))}),$(document).on("click",".toggleQuantityDiscountBlock",function(){content=$(this).parent().find(".specificPriceBlock").html(),$.prototype.fancybox&&$.fancybox.open([{type:"inline",autoScale:!1,minHeight:30,width:"80%",height:"80%",showCloseButton:!1,autoDimensions:!1,content:'<div class="popupSpecificPrice clear clearfix">'+content+"</div>",beforeShow:function(){}}],{padding:0})}),$(document).on("click",".toggleQuantityDiscount",function(){$(this).parent().find(".quantityDiscount").slideToggle()}),$(document).on("mousedown",".accessory-ndk-no-quantity .accessory_img_block",function(){var e=[[15002,15006],[15002,16280],[15006,15002],[15006,16280],[16280,15002],[16280,15006],[15003,15007],[15003,16281],[15007,15003],[15007,16281],[16281,15003],[16281,15007],[15004,15008],[15004,16282],[15008,15004],[15008,16282],[16282,15004],[16282,15008],[15005,15009],[15005,16283],[15009,15005],[15009,16283],[16283,15005],[16283,15009],[15094,15098],[15094,16284],[15098,15094],[15098,16284],[16284,15094],[16284,15098],[15095,15099],[15095,16285],[15099,15095],[15099,16285],[16285,15095],[16285,15099],[15096,15100],[15096,16286],[15100,15096],[15100,16286],[16286,15096],[16286,15100],[15102,15106],[15102,15110],[15106,15102],[15106,15110],[15110,15102],[15110,15106],[15103,15107],[15103,15111],[15107,15103],[15107,15111],[15111,15103],[15111,15107],[15104,15108],[15104,15112],[15108,15104],[15108,15112],[15112,15104],[15112,15108],[15076,15080],[15076,15086],[15080,15076],[15080,15086],[15086,15076],[15086,15080],[15077,15081],[15077,15087],[15081,15077],[15081,15087],[15087,15077],[15087,15081],[15078,15082],[15078,15088],[15082,15078],[15082,15088],[15088,15078],[15088,15082],[15079,15083],[15079,15089],[15083,15079],[15083,15089],[15089,15079],[15089,15083],[17805,17808],[17805,17811],[17811,17805],[17811,17808],[17808,17805],[17808,17811],[17806,17809],[17806,17812],[17812,17806],[17812,17809],[17809,17806],[17809,17812],[17807,17810],[17807,17813],[17813,17807],[17813,17810],[17810,17807],[17810,17813],[17814,17818],[17814,17822],[17822,17814],[17822,17818],[17818,17814],[17818,17822],[17815,17819],[17815,17823],[17819,17815],[17819,17823],[17823,17815],[17823,17819],[17816,17820],[17816,17824],[17820,17816],[17820,17824],[17824,17816],[17824,17820],[17817,17821],[17817,17825],[17821,17817],[17821,17825],[17825,17817],[17825,17821],[22117,22116],[22116,22117],[22114,22118],[22114,22120],[22118,22114],[22118,22120],[22120,22118],[22120,22114],[22115,22119],[22115,22121],[22119,22115],[22119,22121],[22121,22119],[22121,22115],[22130,22129],[22143,22147],[22143,22149],[22147,22143],[22147,22149],[22149,22143],[22149,22147],[22144,22148],[22144,22150],[22148,22144],[22148,22150],[22150,22148],[22150,22144],[22145,22146],[22146,22145],[22288,22149],[22288,22147],[22288,22143],[22149,22288],[22147,22288],[22143,22288],[22290,22146],[22290,22145],[22146,22290],[22145,22290],[22289,22150],[22289,22148],[22289,22144],[22150,22289],[22148,22289],[22144,22289],[22296,22120],[22296,22118],[22296,22114],[22120,22296],[22118,22296],[22114,22296],[22297,22115],[22297,22119],[22297,22121],[22115,22297],[22119,22297],[22121,22297],[22298,22116],[22298,22117],[22116,22298],[22117,22298],[28260,28264],[28260,28268],[28264,28260],[28264,28268],[28268,28260],[28268,28264],[28261,28265],[28261,28269],[28265,28261],[28265,28269],[28269,28261],[28269,28265],[28262,28266],[28262,28270],[28266,28262],[28266,28270],[28270,28262],[28270,28266],[28263,28267],[28263,28271],[28267,28263],[28267,28271],[28271,28263],[28271,28267],[28272,28275],[28272,28278],[28275,28272],[28275,28278],[28278,28272],[28278,28275],[28273,28276],[28273,28279],[28276,28273],[28276,28279],[28279,28273],[28279,28276],[28274,28277],[28274,28280],[28277,28274],[28277,28280],[28280,28274],[28280,28277]];(zindexImgs=[])[15003]=["1"],zindexImgs[15007]=["1"],zindexImgs[16281]=["1"],zindexImgs[15005]=["1"],zindexImgs[15009]=["1"],zindexImgs[16283]=["1"],zindexImgs[15095]=["1"],zindexImgs[15099]=["1"],zindexImgs[16285]=["1"],zindexImgs[28260]=["1"],zindexImgs[28264]=["1"],zindexImgs[28268]=["1"],zindexImgs[28263]=["0"],zindexImgs[28267]=["0"],zindexImgs[28271]=["0"],zindexImgs[28272]=["1"],zindexImgs[28275]=["1"],zindexImgs[28278]=["1"],zindexImgs[17815]=["1"],zindexImgs[17819]=["1"],zindexImgs[17823]=["1"],zindexImgs[17817]=["1"],zindexImgs[17821]=["1"],zindexImgs[17825]=["1"],zindexImgs[17806]=["1"],zindexImgs[17809]=["1"],zindexImgs[17812]=["1"],zindexImgs[15077]=["1"],zindexImgs[15081]=["1"],zindexImgs[15087]=["1"],zindexImgs[15079]=["1"],zindexImgs[15083]=["1"],zindexImgs[15089]=["1"],zindexImgs[15103]=["1"],zindexImgs[15107]=["1"],zindexImgs[15111]=["1"],zindexImgs[22114]=["1"],zindexImgs[22115]=["2"],zindexImgs[22118]=["1"],zindexImgs[22119]=["2"],zindexImgs[22120]=["1"],zindexImgs[22121]=["1"],zindexImgs[22296]=["1"],zindexImgs[22297]=["1"],zindexImgs[22129]=["1"],zindexImgs[22143]=["1"],zindexImgs[22144]=["2"],zindexImgs[22147]=["1"],zindexImgs[22148]=["1"],zindexImgs[22149]=["1"],zindexImgs[22150]=["1"],zindexImgs[22289]=["1"],zindexImgs[22288]=["1"],(campoCorPergola=[])[2001]=["2011"],campoCorPergola[2017]=["2019"],campoCorPergola[2014]=["2302"],campoCorPergola[2018]=["2007"],campoCorPergola[2280]=["2278"],campoCorPergola[2281]=["2279"],campoCorPergola[4877]=["4864","5166"],campoCorPergola[4878]=["4865","5151"],campoCorPergola[3103]=["2409"],campoCorPergola[3106]=["2425"],campoCorPergola[3108]=["2401"],(campoCorTecido=[])[2001]=["2234"],campoCorTecido[2017]=["2234"],campoCorTecido[2018]=["2251"],campoCorTecido[2014]=["2251"],campoCorTecido[2280]=["2289"],campoCorTecido[2281]=["4913"],campoCorTecido[4878]=["4879"],campoCorTecido[4877]=["4881"],campoCorTecido[3103]=["3104"],campoCorTecido[3106]=["3105"],campoCorTecido[3108]=["3109"],(opcoesStoreChange=[])[2001]=["15002","15003","15004","15005"],opcoesStoreChange[2017]=["15094","15095","15096"],opcoesStoreChange[2014]=["15076","15077","15078","15079"],opcoesStoreChange[2018]=["15102","15103","15104"],opcoesStoreChange[2280]=["17805","17806","17807"],opcoesStoreChange[2281]=["17814","17815","17816","17817"],opcoesStoreChange[4877]=["28260","28261","28262","28263"],opcoesStoreChange[4878]=["28272","28273","28274"],opcoesStoreChange[3103]=["22114","22115","22116"],opcoesStoreChange[3106]=["22129"],opcoesStoreChange[3108]=["22143","22144","22145"],me=$(this).parent();if(-1!==$.inArray(me.attr("data-group"),["2001","2017","2014","2018","2280","2281","3103","3106","3108","4777","4778","4877","4878"])){for(i=0;i<e.length;i++)e[i][0]==me.attr("data-id-value")&&(RemoveSelectOptions(e[i][1],me.attr("data-group")),$("div").remove(".aluclass_"+e[i][1]),$(me).hasClass("selected-accessory")?$("div").remove(".aluclass_"+e[i][0]):"4878"!=me.data("group")&&"4877"!=me.data("group")&&"4778"!=me.data("group")&&"4777"!=me.data("group")&&"3108"!=me.data("group")&&"3106"!=me.data("group")&&"3103"!=me.data("group")&&"2281"!=me.data("group")&&"2280"!=me.data("group")&&"2018"!=me.data("group")&&"2014"!=me.data("group")&&"2017"!=me.data("group")&&"2001"!=me.data("group")||("undefined"==typeof(campoCor=$("li[data-group='"+campoCorPergola[me.data("group")][0]+"'].color-ndk.selected-value").data("title"))&&(campoCor=$("li[data-group='"+campoCorPergola[me.data("group")][1]+"'].color-ndk.selected-value").data("title")),cor=campoCor.match(/7016/)?"7016":campoCor.match(/9016/)?"9016":campoCor.match(/9005/)?"9005":campoCor.match(/8019/)?"8019":campoCor.match(/8014/)?"8014":campoCor.match(/7035/)?"7035":campoCor.match(/6005/)?"6005":campoCor.match(/5015/)?"5015":campoCor.match(/5013/)?"5013":campoCor.match(/3005/)?"3005":campoCor.match(/1015/)?"1015":"7016",console.log(e[i][0]+"-"+cor),$("div.aluclass_"+e[i][0]).length)||1==checaSeImgExiste("https://"+document.domain+"/img/fechos_pergola/"+e[i][0]+"-"+cor+".png")&&(void 0!==zindexImgs[e[i][0]]?$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_"+e[i][0]+"' style='z-index: 1;'><img class='composition_element img-reponsive aluclass_"+e[i][0]+"' src='/img/fechos_pergola/"+e[i][0]+"-"+cor+".png'/></div>"):$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_"+e[i][0]+"' style='z-index: 2;'><img class='composition_element img-reponsive aluclass_"+e[i][0]+"' src='/img/fechos_pergola/"+e[i][0]+"-"+cor+".png'/></div>")));-1!==$.inArray(me.attr("data-id-value"),opcoesStoreChange[me.data("group")])&&$("div[data-field='"+campoCorTecido[me.data("group")][0]+"'] li").hasClass("selected-value")&&$("div[data-field='"+campoCorTecido[me.data("group")][0]+"'] li.selected-value").trigger("click")}rootBlock=$(".form-group[data-field='"+me.attr("data-group")+"']"),input=me.find(".ndk-accessory-quantity:eq(0)"),max=parseInt(rootBlock.attr("data-qtty-max"));var t=$("#ndk-accessory-quantity-"+me.attr("data-id-value")).attr("data-price"),a=$("#price_"+me.attr("data-group")).val();0<max&&(rootBlock.find(".selected-accessory").removeClass("selected-accessory"),rootBlock.find(".ndk-accessory-quantity").val(0).trigger("change")),0==parseInt(input.val())?(me.addClass("selected-accessory"),input.val(1).trigger("change"),$("#price_"+me.attr("data-group")).val(parseInt(a)+parseInt(t))):(me.removeClass("selected-accessory"),input.val(0).trigger("change"),$("#price_"+me.attr("data-group")).val(parseInt(a)-parseInt(t)))}),$(document).on("click",".orientation-btn",function(){$(this).parent().find(".orientation-btn").removeClass("active_orientation"),$(this).addClass("active_orientation"),group=$(this).parent().attr("data-group-target"),$("#visual_"+group+" .composition_element, #visual_"+group+" .colorize-cover-item").removeClassSVG("standard-orientation").removeClassSVG("reverse-orientation").addClassSVG($(this).attr("data-orientation"))}),$.fn.addClassSVG=function(a){return $(this).attr("class",function(e,t){return(void 0!==t?t+" ":"")+a}),this},$.fn.removeClassSVG=function(i){return $(this).attr("class",function(e,t){var a=new RegExp("\\b"+i+"\\b","g");return t.replace(a,"")}),this},$(document).on("focus","input.surface",function(){""!=$(this).attr("step")&&$(this).trigger("blur")}),$("textarea.noborder").on("keyup change",function(){$(this).css("height","auto").css("height",this.scrollHeight+(this.offsetHeight-this.clientHeight)),$(this).parent().css("height","auto").css("height",this.scrollHeight+(this.offsetHeight-this.clientHeight)+15)}),BrowserDetect=function(){var e=!0,t=!0,a={browsers:{chrome:r(/Chrome\/([0-9\.]*)/),firefox:r(/Firefox\/([0-9\.]*)/),safari:r(/Version\/([0-9\.]*).*Safari/),opera:r(/Opera\/.*Version\/([0-9\.]*)/,/Opera\/([0-9\.]*)/),msie:r(/MSIE ([0-9\.]*)/,/Trident.*rv:([0-9\.]*)/)},engines:{webkit:o("AppleWebKit"),trident:r(/(MSIE|Trident)/),gecko:o("Gecko"),presto:o("Presto")},platforms:{win:r(/Windows NT ([0-9\.]*)/),mac:r(/Mac OS X ([0-9_\.]*)/),linux:o("X11","Linux")}},i=navigator.userAgent,a={platform:n(a.platforms),browser:n(a.browsers),engine:n(a.engines)};function r(t,a){return function(){var e=t.exec(i)||a&&a.exec(i);return e&&e[1]}}function o(e){var t=Array.prototype.slice.apply(arguments);return function(){for(var e=0;e<t.length;e++)if(i.indexOf(t[e])<0)return;return!0}}function n(e){var t,a;for(t in e)if(e.hasOwnProperty(t)&&(a=e[t]()))return{name:t,value:a}}function s(e){var t=document.documentElement;t.className+=(t.className?" ":"")+e}function l(e){return"string"==typeof e?e.replace(/\./g,"_"):"unknown"}return a.platform&&(s(a.platform.name),e)&&s(a.platform.name+"-"+l(a.platform.value)),a.engine&&s(a.engine.name),a.browser&&(s(a.browser.name),s(a.browser.name+"-"+parseInt(a.browser.value,10)),t)&&s(a.browser.name+"-"+l(a.browser.value)),a}(),$(document).on("click",'li[data-group="2001"], li[data-group="2017"], li[data-group="2014"], li[data-group="2018"], li[data-group="2280"], li[data-group="2281"], li[data-group="3103"], li[data-group="3106"], li[data-group="3108"], li[data-group="4778"], li[data-group="4777"], li[data-group="4877"], li[data-group="4878"]',function(){var e=$(this).data("group"),t=[],a=(t[2001]=["15002","15003","15004","15005"],t[2017]=["15094","15095","15096"],t[4877]=["28260","28261","28262","28263"],t[4878]=["28272","28273","28274"],t[2280]=["17805","17806","17807"],t[2281]=["17814","17815","17816","17817"],t[2014]=["15076","15077","15078","15079"],t[2018]=["15102","15103","15104"],t[3103]=["22114","22115","22116"],t[3106]=["22129"],t[3108]=["22143","22144","22145"],0);for(i=0;i<t[e].length;i++)$('li[data-id-value="'+t[e][i]+'"]').hasClass("selected-accessory")&&a++;0==a?$("div[data-field='2234']").length?(RemoveField("2234"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='4911']").length?RemoveField("4911"):$("div[data-field='4879']").length?RemoveField("4879"):$("div[data-field='4881']").length?RemoveField("4881"):$("div[data-field='2251']").length?(RemoveField("2251"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='2289']").length?(RemoveField("2289"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='4913']").length?(RemoveField("4913"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3104']").length?(RemoveField("3104"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3105']").length?(RemoveField("3105"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='3109']").length&&(RemoveField("3109"),$("#ndkcsfield_3065").html(""),$("#text_3065").attr("value","")):$("div[data-field='2234']").length?ShowField("2234"):$("div[data-field='4911']").length?ShowField("4911"):$("div[data-field='4879']").length?ShowField("4879"):$("div[data-field='4881']").length?ShowField("4881"):$("div[data-field='2251']").length?ShowField("2251"):$("div[data-field='2289']").length?ShowField("2289"):$("div[data-field='4913']").length?ShowField("4913"):$("div[data-field='3104']").length?ShowField("3104"):$("div[data-field='3105']").length?ShowField("3105"):$("div[data-field='3109']").length&&ShowField("3109")}),$(document).on("click",'li[data-group="2234"], li[data-group="4911"], li[data-group="2251"], li[data-group="2289"], li[data-group="4913"], li[data-group="3104"], li[data-group="3105"], li[data-group="3109"], li[data-group="4779"], li[data-group="4879"], li[data-group="4881"]',function(){var e,t=$(this).data("title"),a=(corStore=t.match(/7016/)?"7016":"9016",["15002","15003","15004","15005","15094","15095","15096","15076","15077","15078","15079","15102","15103","15104","17805","17806","17807","17814","17815","17816","17817","27640","27641","27642","27628","27629","27630","27631","28260","28261","28262","28263","28272","28273","28274","22114","22115","22116","22129","22143","22144","22145"]);if($.each($('li[data-group="2401"].selected-color, li[data-group="2409"].selected-color, li[data-group="2425"].selected-color, li[data-group="2011"].selected-color, li[data-group="2019"].selected-color, li[data-group="2007"].selected-color, li[data-group="2302"].selected-color, li[data-group="2278"].selected-color, li[data-group="2279"].selected-color, li[data-group="4769"].selected-color, li[data-group="4770"].selected-color, li[data-group="4864"].selected-color, li[data-group="4865"].selected-color, li[data-group="5151"].selected-color, li[data-group="5166"].selected-color'),function(){campoCorEstrutura=$(this).data("title")}),legendaCorEstrutura=campoCorEstrutura.match(/7016/)?"Gris RAL "+(corEstrutura="7016"):campoCorEstrutura.match(/9016/)?"Blanc RAL "+(corEstrutura="9016"):campoCorEstrutura.match(/9005/)?"Noir RAL "+(corEstrutura="9005"):campoCorEstrutura.match(/8019/)?"Gris RAL "+(corEstrutura="8019"):campoCorEstrutura.match(/8014/)?"Marron RAL "+(corEstrutura="8014"):campoCorEstrutura.match(/7035/)?"Gris RAL "+(corEstrutura="7035"):campoCorEstrutura.match(/6005/)?"Vert RAL "+(corEstrutura="6005"):campoCorEstrutura.match(/5015/)?"Bleu RAL "+(corEstrutura="5015"):campoCorEstrutura.match(/5013/)?"Bleu RAL "+(corEstrutura="5013"):campoCorEstrutura.match(/3005/)?"Rouge RAL "+(corEstrutura="3005"):"Ivoire RAL "+(corEstrutura="1015"),"2234"==$(this).data("group")||"4911"==$(this).data("group")||"4779"==$(this).data("group")||"2289"==$(this).data("group")||"4913"==$(this).data("group"))if(corStore!=corEstrutura)for($("div").remove(".aluclass_fechos_tecidos"),i=0;i<a.length;i++)$("img.aluclass_"+a[i]).length&&(e=a[i]+"-"+corStore+"-tecido",console.log("novaImagem "+e),trocaCorStore(a[i],e));else $("div").remove(".aluclass_fechos_tecidos");else if("7016"!=corStore)for($("div").remove(".aluclass_fechos_tecidos"),i=0;i<a.length;i++)$("img.aluclass_"+a[i]).length&&(e=a[i]+"-"+corStore+"-tecido",console.log("novaImagem "+e),trocaCorStore(a[i],e));else $("div").remove(".aluclass_fechos_tecidos");var r=0;for(console.log(a.length),i=0;i<a.length;i++)$('li[data-id-value="'+a[i]+'"]').hasClass("selected-accessory")&&r++;console.log(r),0<r&&(console.log("atribui a cor da estrutura "+legendaCorEstrutura),$("#ndkcsfield_3065").html(legendaCorEstrutura),$("#text_3065").attr("value",legendaCorEstrutura))}),$(document).on("click","input.ndk-radio",function(){var e=$(this).data("group"),t=$(this).data("id-value");"2264"!=e&&"2262"!=e||("17675"==t||"17673"==t?$("div.aluclass_"+t).length||$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos aluclass_lamina_pergola aluclass_"+t+"' style='z-index: 1;'><img class='composition_element img-reponsive aluclass_"+t+"' src='/img/laminas_pergola/lamina-gris-promo.png'/></div>"):$("div").remove(".aluclass_lamina_pergola"))}),$(document).on("click",'li[data-group="2522"]',function(){var e=$(this).data("title");"9016"==(e=e.match(/7016/)?"7016":"9016")?(e="store-vertical-frente-9016-tecido",console.log("novaImagem "+e),$("#image-block").append("<div class='absolute-visu view-0 absolute-img aluclass_fechos_tecidos' style='z-index: 2;'><img class='composition_element img-reponsive' src='/img/fechos_pergola/"+e+".png'/></div>")):$("div").remove(".aluclass_fechos_tecidos")});