var formatedPrices=[];function formatCurrency17_back(o,r,e,t){var a=" ";return o=ps_round(o=parseFloat(o.toFixed(10)),2),0<t&&(a=" "),1==r?e+a+formatNumber(o,2,",","."):2==r?formatNumber(o,2," ",",")+a+e:3==r?e+a+formatNumber(o,2,".",","):4==r?formatNumber(o,2,",",".")+a+e:5==r?e+a+formatNumber(o,2,"'","."):o}function formatCurrency17(r,o,e,t){var a;return parseFloat(r)in formatedPrices?formatedPrices[parseFloat(r)]:(a="",$.ajax({type:"GET",async:!1,url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php?action=formatPrice",data:{price:parseFloat(r)},success:function(o){a=o,formatedPrices[parseFloat(r)]=o}}),a)}function formatNumber(o,r,e,t){for(var a=(o=o.toFixed(r))+"",l=a.split("."),n=2===l.length?l[0]:a,a=("0."+(2===l.length?l[1]:0)).substr(2),i=n.length,u=1;u<4;u++)o>=Math.pow(10,3*u)&&(n=n.substring(0,i-3*u)+e+n.substring(i-3*u));return 0===parseInt(r)?n:n+t+(0<a?a:"00")}function ps_round(o,r){void 0===r&&(r=2);var e=roundMode="undefined"==typeof roundMode?2:roundMode;if(0===e)return ceilf(o,r);if(1===e)return floorf(o,r);if(2===e)return ps_round_half_up(o,r);if(3==e||4==e||5==e){var e=14-Math.floor(ps_log10(Math.abs(o))),t=Math.pow(10,Math.abs(r));if(r<e&&e-r<15){var a=Math.pow(10,Math.abs(e));tmp_value=0<=e?o*a:o/a,tmp_value=ps_round_helper(tmp_value,roundMode),a=Math.pow(10,Math.abs(r-e)),tmp_value/=a}else if(tmp_value=0<=r?o*t:o/t,1e15<=Math.abs(tmp_value))return o;return tmp_value=ps_round_helper(tmp_value,roundMode),0<r?tmp_value/=t:tmp_value*=t,tmp_value}}function ps_round_half_up(o,r){r=Math.pow(10,r),o*=r;return(o=5<=Math.floor(10*o)-10*Math.floor(o)?Math.ceil(o):Math.floor(o))/r}var low={r:255,g:255,b:0},mid={r:255,g:0,b:255},high={r:0,g:200,b:200};function updateColorLabels(){$($("#LowColorPicker .ColorBlotch")[0]).css("background-color",toRGBCSS(low)),$($("#MidColorPicker .ColorBlotch")[0]).css("background-color",toRGBCSS(mid)),$($("#HighColorPicker .ColorBlotch")[0]).css("background-color",toRGBCSS(high)),$("#LowColorPicker .label").html("Outline: rgb("+low.r+", "+low.b+", "+low.g+")  "+NDKrgbToHex(low.r,low.b,low.g)),$("#MidColorPicker .label").html("Body: rgb("+mid.r+", "+mid.b+", "+mid.g+") "+NDKrgbToHex(mid.r,mid.b,mid.g)),$("#HighColorPicker .label").html("Highlight: rgb("+high.r+", "+high.b+", "+high.g+") "+NDKrgbToHex(high.r,high.b,high.g))}function updateView(o,r,e,t){colorizeImg("#headImage","#headCanvas","#headTarget",low,mid,high,{base:100,high:190})}function toRGBCSS(o){return"rgb("+o.r+","+o.b+","+o.g+")"}function cleanUpColor(o){o=o.replace(" ","").replace(" ","").replace("rgb(","").replace(")","").split(",");return{r:o[0],b:o[1],g:o[2]}}function NDKcomponentToHex(o){o=Math.floor(o).toString(16);return o=o.length<2?"0"+o:o}function NDKrgbToHex(o,r,e){return"#"+NDKcomponentToHex(o)+NDKcomponentToHex(r)+NDKcomponentToHex(e)}function NDKhexToRgb(o){o=o.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,r,e,t){return r+r+e+e+t+t});o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}function colorizeImg(o,r,e,t,a,l,n){lowColor=t,midColor=a,highColor=l;for(var i=70,l=200,t=(image=$(o).get(0)).width,a=image.height,o=(null!=n&&(null!=n.base&&(i=n.base),null!=n.high&&(l=n.high),null!=n.width&&(t=n.width),null!=n.height)&&(a=n.height),$(r)[0].setAttribute("width",t),$(r)[0].setAttribute("height",a),$(r).get(0)),n=((context=o.getContext("2d")).drawImage(image,0,0),context.getImageData(0,0,t,a)),u=n.data,h=0,c=u.length;h<c;h+=4){var g=(u[h]+u[h+1]+u[h+2])/3,d=lowColor;i<g&&(d=l<g?highColor:midColor),u[h]=d.r,u[h+1]=d.b,u[h+2]=d.g}context.putImageData(n,0,0),$(e).attr("src",o.toDataURL("image/png"))}$("#LowColorPicker .ColorBlotch").bind("click",function(){updateView(low=cleanUpColor($(this).css("background-color")),mid,high)});