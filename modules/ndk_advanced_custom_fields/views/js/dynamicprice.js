var productPrice,priceResult=0,reduc_Array=!1,label=labelTotal,type=$("meta[itemprop=priceCurrency]").attr("content"),message=priceMessage,message_specific=priceMessageSpecific,productPriceUp=0,priceInitiated=[],last_qtty_sp=0,last_id_combination_sp=0,selectedConfigValue=[],totalUnitPrice=0,productPriceOLD=0,ndkcfAttrStock=!1,reduc_only_product=!1,serviceiva10=!1,totalDescontos=0,tipoReducao="",valorReducao=0;function getDescontosCatalogo(){id_product=$("#ndkcf_id_product").val(),$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,action:"getDescontosCatalogo"},success:function(e){totalDescontos=e.totalDescontos,tipoReducao=e.tipoReducao,valorReducao=e.valorReducao}})}function initPriceVars(){if("function"==typeof initPriceVars_Override)return initPriceVars_Override();1!=isFields||$("#ndkcsfields-block").length<1||(id_product=$("#ndkcf_id_product").val(),id_combination=$("input#idCombination").val(),qtty=$("#quantity_wanted").val(),$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,id_product_attribute:id_combination,quantity:1,action:"getAttributePrice"},success:function(e){0<parseFloat(addProductPrice)?productPriceOLD=(productPrice=e).price:productPrice=0,priceInitiated=!0}}),last_qtty_sp=qtty,last_id_combination_sp=id_combination,$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,id_product_attribute:id_combination,quantity:qtty,action:"getSpecificPrice"},success:function(e){reduc_Array=e,update_price_dynamic(0)}}))}function update_price_dynamic(r){setTimeout(function(){id_product=$("#ndkcf_id_product").val(),id_combination=$("input#idCombination").val(),(qtty=$("#quantity_wanted").val())!=last_qtty_sp||id_combination!=last_id_combination_sp?(last_qtty_sp=qtty,last_id_combination_sp=id_combination,$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,id_product_attribute:id_combination,quantity:qtty,action:"getSpecificPrice"},success:function(e){(reduc_Array=e).old_price===e.old_price?display_price_dynamic(r,e):update_price_dynamic(r)}})):0<reduc_Array.old_price?display_price_dynamic(r,reduc_Array):display_price_dynamic(r)},300)}function getPriceHt(e,r,t){return"function"==typeof getPriceHt_Override?getPriceHt_Override(e,r,t):(r=r||"",t=t||!1,ht_price=e/(1+ndk_taxe_rate/100),t?ht_price:""==r?formatCurrencyNdk(ht_price):void formatCurrencyNdkCallback(+ht_price,r,labelTotalHT))}function getPriceHt_back(e,r){if("function"==typeof getPriceHt_Override)return getPriceHt_Override(e,r);r=r||"",id_product=$("#ndkcf_id_product").val(),$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{price:e,id_product:id_product,action:"removePriceTaxes"},success:function(e){if(""==r)return formatCurrencyNdk(e);formatCurrencyNdkCallback(+e,r,labelTotalHT)}})}function getPricesDiscount(r,e){if("function"==typeof getPricesDiscount_Override)return getPricesDiscount_Override(r,e);qtty=$("#quantity_wanted").val(),id_product=$("#ndkcf_id_product").val(),$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,group:r,value:e,quantity:qtty,action:"getPricesDiscount"},success:function(e){isNaN(e)&&(e=0),price_type=$("#price_type_"+r).attr("data-price-type"),0<groupAdded[r]&&e!=groupAdded[r]&&0<e&&(0<parseFloat(e)&&!isNaN(e)&&(groupAdded[r]=e),$("#quantity_wanted").trigger("change"),$("#quantity_wanted").trigger("touchspin.stopspin"))}})}function getAllPricesDiscount(){if("function"==typeof getAllPricesDiscount_Override)return getAllPricesDiscount_Override();getSelectedValuesForPrice(),qtty=$("#quantity_wanted").val(),id_product=$("#ndkcf_id_product").val(),$.ajax({async:!0,type:"GET",global:!1,dataType:"json",url:baseUrl+"modules/ndk_advanced_custom_fields/front_ajax.php",data:{id_product:id_product,group:selectedConfigValue,quantity:qtty,action:"getAllPricesDiscount"},success:function(e){for(idG in e)0<parseFloat(e[idG])&&!isNaN(e[idG])&&parseFloat(groupAdded[idG])!=e[idG]&&(groupAdded[idG]=e[idG],$("#quantity_wanted").trigger("change"),$("#quantity_wanted").trigger("touchspin.stopspin"))}})}function getSelectedValuesForPrice(){return"function"==typeof getSelectedValuesForPrice_Override?getSelectedValuesForPrice_Override():(selectedConfigValue=[],$("*[name^='ndkcsfield[']").not(".recipient-field").each(function(){checkStockOption(group=$(this).attr("id").replace("ndkcsfield_","")),$(this).is(":radio")&&(group=$(this).attr("data-group"),!$(this).is(":checked"))||(selectedConfigValue[group]=$(this).val())}),selectedConfigValue)}function checkStockOption(e){if("function"==typeof checkStockOption_Override)return checkStockOption_Override(e);maxProductQuantity=999999999,(rootBlock=$(".form-group[data-field='"+e+"']")).find("[data-quantity-available]").each(function(){(maxProductQuantity=($(this).is(":checked")||$(this).hasClass("selectedValue")||$(this).is(":selected"))&&parseFloat($(this).attr("data-quantity-available"))<maxProductQuantity?parseFloat($(this).attr("data-quantity-available")):maxProductQuantity)<$("#quantity_wanted").attr("max")&&$("#quantity_wanted").attr("max",maxProductQuantity)})}function display_price_dynamic(e,r){if("function"==typeof display_price_dynamic_Override)return display_price_dynamic_Override(e,r);$(".product_quantity_up").attr("onclick","update_price_dynamic(1);"),$(".product_quantity_down").attr("onclick","update_price_dynamic(-1);"),id_product=$("#ndkcf_id_product").val(),$("input#idCombination").val(),$.isEmptyObject(r)||null==r.old_price||(formatCurrencyNdkCallback(parseFloat(r.old_price),"#old_price_display > span.price","",""),productPrice=1==addProductPrice?parseFloat(r.old_price):0),$("#our_price_display").show(),$("#specificPrice").text("");$("input#idCombination").val();var t,o=$("#quantity_wanted").val(),a=((o=parseFloat(o))==quantityAvailable&&1==e&&(o=quantityAvailable-1),o=parseFloat(o),$(".quantityAvailableAlert").hide(),$(".contentPrice").show(),selectedConfigValue=getSelectedValuesForPrice(),!$.isEmptyObject(r)&&(r.reduction_type,1)&&(r.reduction,1)?"amount"==r.reduction_type&&(reduction_used_aluclass=parseFloat(r.reduction)):reduction_used_aluclass=0,0),i=!1,c=[5426,5417,5424,5425,5439,5440,5441,5442,5443,5444,5445,5446,5447,5448,5449,5450,5452,5453,5454,5455,5456,5457,5458,5459,5460,5462,5463,5465,5466,5467,5472,5473,5518,5522,5523,5524,5546];for(t in groupAdded){var p=t.split("-"),i=-1!==$.inArray(parseInt(p[0]),c);void 0!==groupAdded[t]&&("percent"!=(price_type=$("#price_type_"+t).attr("data-price-type"))?a=parseFloat(a)+parseFloat(i?groupAdded[t]:groupAdded[t]-groupAdded[t]*valorReducao):"undefined"!=typeof price_type&&"percent"==price_type&&(multiplicator=groupAdded[t]/100,toAdd=productPriceOLD/(1-valorReducao)*multiplicator,a=parseFloat(a)+toAdd))}var d,u,n,l,e=$("#portivaaumento").val();0<totalDescontos&&("amount"==tipoReducao?a-=valorReducao:productPrice+=e-e*valorReducao),productPriceUp=parseFloat(productPrice),productPriceUp+=parseFloat(a),priceResult=o*productPriceUp,!$.isEmptyObject(r)&&(r.reduction_type,1)&&(r.reduction,1)?(l=d=u=0,n="",$("#reduction_amount").hide(),$("#reduction_percent").hide(),!$.isEmptyObject(r)&&(r.reduction_type,1)&&(u=r.reduction_type,standard_reduc=!0,d=parseFloat(r.reduction)),"percentage"==u&&(l=parseInt(100*d)+"%",$("#reduction_percent_display").text("-"+l),$("#reduction_amount").hide(),$("#reduction_percent").show(),oldCustomizationPrice=formatCurrencyNdk(a),reduc_only_product?(d*=productPriceUp-a,a-=reduction_customization_used=0):(a-=reduction_customization_used=a*(d*=productPriceUp),formatCurrencyNdkCallback(a,"#additionnal_price","("+additionnalText+"+",') <span class="old_price">(+'+oldCustomizationPrice+")</span>"))),"amount"==u&&(d=parseFloat(d),l=formatCurrencyNdk(parseFloat(d)),$("#reduction_amount_display").text("-"+l),$("#reduction_amount").show(),$("#reduction_percent").hide()),n=productPriceUp-d,reduced_price=productPrice-d,$("#specificReduct").text("-"+l),$("#specificReduct").addClass("specificReductStyle"),$("#specificPrice").text(n+" "+currencySign),!$.isEmptyObject(r)&&(r.reduction_type,1)&&0<parseFloat(d)?(formatCurrencyNdkCallback(parseFloat(r.old_price),"#oldPrice"),priceResult=o*(productPriceUp-d),0<parseFloat(priceResult)&&!standard_reduc&&$(".specificBlock").slideDown("slow")):(priceResult=o*productPriceUp,0<parseFloat(priceResult)&&($("span#our_price_display").show(),$(".specificBlock").fadeOut("normal"),$("#specificPrice").hide()))):0<parseFloat(priceResult)&&($("span#our_price_display").show(),$(".specificBlock").fadeOut("normal"),$("#specificPrice").hide(),e=$("#portivaaumento").val(),0<totalDescontos&&"amount"!=tipoReducao&&(priceResult+=e-e*valorReducao),formatCurrencyNdkCallback(+priceResult,".productPriceUp"),formatCurrencyNdkCallback(+productPriceUp,"#unit_price_display"),1==displayPriceHT)&&(getPriceHt(priceResult,".productPriceUpHT"),getPriceHt(productPriceUp,"#unit_price_display")),0<parseFloat(priceResult)&&($("span#our_price_display").show(),$(".specificBlock").fadeOut("normal"),$("#specificPrice").hide(),valorReducaoCC=void 0===valorReducao?0:valorReducao,u=$(".current_price_aluclass").attr("content"),4511==parseFloat(id_product)&&0<productPriceUp-(parseFloat(u)+1)&&(productPriceUp-=parseFloat(u)-valorReducaoCC*parseFloat(u),priceResult-=parseFloat(u)-valorReducaoCC*parseFloat(u)),6001<+priceResult?(oneyX=48,imgcredit="Oney48",textoney="La solution de paiement 12x à 84x Oney vous permet de payer en 12 à 84 fois, les frais sont de 4,3% du montant total de la commande dans la limite de 21500 € maximum. Consultez le détail de l’offre sur le site du partenaire.",linkcredit="/content/61-le-paiement-en-12-24-36-48-60-ou-84-fois-avec-oney-chez-priximbattable"):(oneyX=4,imgcredit="alma4x",linkcredit="/content/67-payez-vos-achats-en-3-ou-4-fois-avec-alma",textoney="La solution de paiement Alma vous permet de payer en 3 ou 4 fois, lesfrais sont de 1,6% du montant total de la commande pour les paiements en 3 fois et 2,4% du montant total de la commande pour les paiements en 4 fois."),$(".tooltiptext-info-oney").html(textoney),$(".linkcreditpage").attr("href",linkcredit),reductionpercent=$("#reductionpercent").val(),priceresultoney=+priceResult,priceresultoneytext="",0<reductionpercent&&(priceresultoneytext="Avec code ",priceresultoney-=priceresultoney*(reductionpercent/100)),l=0,l=serviceiva10?(n=1.2,r=1.1,priceresultoney=priceresultoney/n*r,priceResult=priceResult/n*r,productPriceUp=productPriceUp/n*r,0<valorReducao?(productPriceOLD/(1-valorReducao)+parseInt(e))/n*r:(productPriceOLD+parseInt(e))/n*r):0<valorReducao?productPriceOLD/(1-valorReducao)+parseInt(e):productPriceOLD+parseInt(e),navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|iPhone|iPod|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i)&&(formatCu,rrencyNdkCallback(priceresultoney/oneyX,".productPriceUpx4mobile",oneyX+"x "+priceresultoneytext,'<br><img src="/img/'+imgcredit+'.png" width="90px" height="auto">')),formatCurrencyNdkCallback(+l,".current_price_aluclass"),formatCurrencyNdkCallback(priceresultoney/oneyX,".productPriceUpx4",oneyX+"x "+priceresultoneytext,'<img src="/img/'+imgcredit+'.png" width="110px" height="auto">'),formatCurrencyNdkCallback(+priceResult,".productPriceUp"),formatCurrencyNdkCallback(+priceresultoney,".productPriceUpbanner",priceresultoneytext),formatCurrencyNdkCallback(+productPriceUp,"#unit_price_display"),1==displayPriceHT)&&(getPriceHt(priceResult,".productPriceUpHT"),getPriceHt(productPriceUp,"#unit_price_display")),$(".blockPrice").slideDown(),1==showRecap?($("#ndkcf_recap").show(),$("#ndkcf_recap_linear").parent().show(),setRecap()):($("#ndkcf_recap").hide(),$("#ndkcf_recap_linear").parent().hide()),totalUnitPrice=priceResult/o}function setRecap(){if("function"==typeof setRecap_Override)return setRecap_Override();for(idGroup in getSelectedValuesForPrice(),$("#ndkcf_recap").show(),$("#ndkcf_recap > .ndkcf_recap_content").stop(!0,!0).slideDown("slow"),$(".recap_group").remove(),setRecapItemBaseProduct(),setRecapRecipient(),selectedConfigValue)""!=selectedConfigValue[idGroup]&&0!=selectedConfigValue[idGroup]?((input=(input=(input=$("#"+idGroup)).length<1?$(".ndkackFieldItem[data-field='"+idGroup+"']").find("input:checked").eq(0):input).length<1?$("#ndkcsfield_"+idGroup):input).hasClass("ndk-accessory-comb-tab")?setRecapItemCombTab:input.hasClass("dimension_text")?setRecapItemDimensions:input.hasClass("surface")?setRecapItemSurface:input.hasClass("ndk-checkbox")?setRecapItemcheckbox:input.hasClass("ndk-radio")?setRecapItemRadio:input.hasClass("ndk-accessory-quantity")?setRecapItemAccessory:setRecapItemGlobal)(idGroup,input):($(".recap_item_"+idGroup).remove(),$(".recap_group_"+idGroup).remove()),!$.isEmptyObject(reduc_Array)&&(reduc_Array.reduction_type,1)&&(type_used=reduc_Array.reduction_type,standard_reduc=!0,qty_required_used=1,reduction_used=parseFloat(reduc_Array.reduction),"percentage"==type_used&&(reduction_customization_used=customizationPrice*reduction_used,reduction_used*=productPriceUp),"amount"==type_used&&(reduction_used=parseFloat(reduction_used)),0<parseFloat(reduction_used)&&(libelle_reduction=formatCurrencyNdk(parseFloat(reduction_used)),$(".reduc_total").remove(),$(".ndkcf_recap_total").prepend('<p class="reduc_total">-'+libelle_reduction+"</p>"))),formatCurrencyNdkCallback(+priceResult,".ndkcf_recap_total > .price"),1==displayPriceHT&&getPriceHt(priceResult,".ndkcf_recap_total > .priceht");480<$(window).width()&&($("#ndkcf_recap_linear").html($("#ndkcf_recap").html()),$("#ndkcf_recap_linear .groupTotalPriceNo").parent().parent().remove(),$("#ndkcf_recap_linear .ndkcf_recap_title").removeClass("ndkcf_recap_title").addClass("recap_title"),$("#ndkcf_recap_linear > .ndkcf_recap_content").stop(!0,!0).slideDown(),1==displayPriceHT)&&$("#ndkcf_recap_linear .groupTotalPrice").each(function(){id_group=$(this).parent().parent().attr("data-group"),$(this).after('<span class="priceht" id="priceht_'+id_group+'"></span>'),getPriceHt($(this).attr("content"),"#priceht_"+id_group)}),setTimeout(function(){$("#ndkcf_recap > .ndkcf_recap_content").stop(!0,!0).slideUp("slow")},15e3),1<$("#ndkcf_recap .recap_group_0").length&&$("#ndkcf_recap .recap_group_0:eq(0)").remove()}function setRecapItemBaseProduct(){if("function"==typeof setRecapItemBaseProduct_Override)return setRecapItemBaseProduct_Override();productUnitPrice=$("#our_price_display").attr("content"),productName=$("h1[itemprop='name']:eq(0)").text(),isNaN(productPrice)&&(productPrice=0),$.when($(".recap_group_0").remove()).done(function(){$(".recap_group_0").length<1&&$("#ndkcf_recap > .ndkcf_recap_content").prepend('<div class="recap_group recap_group_0" data-group="0"><p class="recap_group_title">'+productName+' : <span class="groupTotalPrice" content="'+productPrice+'">'+formatCurrencyNdk(productPrice)+"</span></p></div>")}),1<$("#ndkcf_recap .recap_group_0").length&&$("#ndkcf_recap .recap_group_0:eq(0)").remove()}function setRecapItemGlobal(e,r){if("function"==typeof setRecapItemGlobal_Override)return setRecapItemGlobal_Override(e,r);price_percent=!1,visu=r.val(),rootGroup=e,rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup,idpriceGroup=idprice,groupTotalPrice=groupAdded[idprice],"undefined"!=typeof(price_type=$("#price_type_"+idprice).attr("data-price-type"))&&"percent"==price_type&&(price_percent=!0),$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+(price_percent?"+"+groupTotalPrice+"%":formatCurrencyNdk(groupTotalPrice))+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+strReplaceAll(visu,"¶|\n|\r\n","</br>")+(0<parseFloat(itemPrice)?" : "+(price_percent?"+"+itemPrice+"%":formatCurrencyNdk(itemPrice)):"")+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(price_percent?"+"+groupTotalPrice+"%":formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo"),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemRadio(e,r){if("function"==typeof setRecapItemRadio_Override)return setRecapItemRadio_Override(e,r);$(r).is(":checked")&&(visu=r.val(),rootGroup=r.attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup,idpriceGroup=rootGroup,itemPrice=groupAdded[idprice],groupTotalPrice=itemPrice,$(".recap_item_"+rootGroup).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),recapHtml='<div class="recap_item recap_item_'+rootGroup+'">'+visu+(0<parseFloat(itemPrice)?" : "+formatCurrencyNdk(itemPrice):"")+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo")),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemCombTab(e,r){if("function"==typeof setRecapItemCombTab_Override)return setRecapItemCombTab_Override(e,r);visu=r.attr("data-attr-lang"),rootGroup=r.attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup+"-"+e.replace("ndk-accessory-quantity-",""),idpriceGroup=(idpriceGroup=idprice.split("-"))[0],groupTotalPrice=getPriceGroup(idpriceGroup),$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+visu+" x"+selectedConfigValue[e]+(0<parseFloat(itemPrice)?" : "+formatCurrencyNdk(itemPrice):"")+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo"),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemAccessory(e,r){if("function"==typeof setRecapItemAccessory_Override)return setRecapItemAccessory_Override(e,r);visu=r.parent().parent().parent().find("b").html(),rootGroup=r.parent().parent().parent().attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup+"-"+e.replace("ndk-accessory-quantity-",""),idpriceGroup=(idpriceGroup=idprice.split("-"))[0],groupTotalPrice=getPriceGroup(idpriceGroup),$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+visu+" x"+selectedConfigValue[e]+(0<parseFloat(itemPrice)?" : "+formatCurrencyNdk(itemPrice):"")+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo"),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemDimensions(e,r){if("function"==typeof setRecapItemDimensions_Override)return setRecapItemDimensions_Override(e,r);visu=r.prev().text()+" : "+r.val(),rootGroup=r.attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup,idpriceGroup=idprice,groupTotalPrice=groupAdded[idprice],$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+visu+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo"),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemSurface(e,r){if("function"==typeof setRecapItemSurface_Override)return setRecapItemSurface_Override(e,r);visu=r.attr("placeholder")+" : "+r.val(),rootGroup=r.attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=rootGroup,idpriceGroup=idprice,groupTotalPrice=groupAdded[idprice],$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+visu+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo"),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapItemcheckbox(e,r){if("function"==typeof setRecapItemcheckbox_Override)return setRecapItemcheckbox_Override(e,r);rootGroup=r.attr("data-group"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),$(r).is(":checked")&&(visu=r.val(),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),idprice=r.attr("data-value-id"),idpriceGroup=rootGroup,groupTotalPrice=0,group=$(r).attr("data-group"),rootBlock=$(".ndkackFieldItem[data-field='"+group+"']"),(others=rootBlock.find('input[type="checkbox"]')).each(function(){void 0!==groupAdded[$(this).attr("data-value-id")]&&(groupTotalPrice+=parseFloat(groupAdded[$(this).attr("data-value-id")]))}),$(".recap_item_"+e).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p></div>"),itemPrice=groupAdded[idprice],recapHtml='<div class="recap_item recap_item_'+e+'">'+visu+(0<parseFloat(itemPrice)?" : "+formatCurrencyNdk(itemPrice):"")+"</div>",$(".recap_group_"+rootGroup).append(recapHtml),0<parseFloat(groupTotalPrice)?$(".recap_group_"+rootGroup).find(".groupTotalPrice").html(formatCurrencyNdk(groupTotalPrice)).removeClass("groupTotalPriceNo").attr("content",groupTotalPrice):$(".recap_group_"+rootGroup).find(".groupTotalPrice").html("").addClass("groupTotalPriceNo")),-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by")}function setRecapRecipient(){if("function"==typeof setRecapRecipient_Override)return setRecapRecipient_Override();recipientRecap=[],rootGroupBlock=!1,$(".recipient-group").each(function(){rootGroup=$(this).attr("data-field"),rootGroupBlock=$(".form-group[data-field='"+rootGroup+"']:not(.submitContainer)"),(groupTitleEl=rootGroupBlock.find("label:eq(0)").clone()).find(".toggleText, .tooltipDescription, .tooltipDescMark").remove(),groupTitle=groupTitleEl.text(),groupTotalPrice=0,group=rootGroup,rootBlock=$(".ndkackFieldItem[data-field='"+group+"']"),firstnameInput=rootGroupBlock.find("[name='ndkcsfield["+rootGroup+"][recipient][firstname]']"),lastnameInput=rootGroupBlock.find("[name='ndkcsfield["+rootGroup+"][recipient][lastname]']"),emailInput=rootGroupBlock.find("[name='ndkcsfield["+rootGroup+"][recipient][email]']"),messageInput=rootGroupBlock.find("[name='ndkcsfield["+rootGroup+"][recipient][message]']"),content='<div class="recap_item recap_item_'+rootGroup+'">'+firstnameInput.parent().find("label").text()+" : "+firstnameInput.val()+"</div>",content=(content=(content+='<div class="recap_item recap_item_'+rootGroup+'">'+lastnameInput.parent().find("label").text()+" : "+lastnameInput.val()+"</div>")+'<div class="recap_item recap_item_'+rootGroup+'">'+emailInput.parent().find("label").text()+" : "+emailInput.val()+"</div>")+'<div class="recap_item recap_item_'+rootGroup+'">'+messageInput.parent().find("label").text()+" : "+messageInput.val()+"</div>",$(".recap_group_"+rootGroup).remove(),$("#ndkcf_recap .recap_group_"+rootGroup).length<1&&$("#ndkcf_recap .recap_items").append('<div class="recap_group recap_group_'+rootGroup+'" data-group="'+rootGroup+'"><p class="recap_group_title">'+groupTitle+" : "+(0<groupTotalPrice?'<span class="groupTotalPrice">'+formatCurrencyNdk(groupTotalPrice)+"</span>":'<span class="groupTotalPrice groupTotalPriceNo">&nbsp;</span>')+"</p>"+content+"</div>")}),rootGroupBlock&&(-1<rootGroupBlock.attr("class").indexOf("disabled_value_by")?$(".recap_group_"+rootGroup).addClass("disabled_value_by"):$(".recap_group_"+rootGroup).removeClass("disabled_value_by"))}function getPriceGroup(e){if("function"==typeof getPriceGroup_Override)return getPriceGroup_Override(e);for(idPrice in priceGroup=0,groupAdded)-1<idPrice.indexOf(e+"-")&&(priceGroup+=groupAdded[idPrice]);return priceGroup}$(document).ready(function(){var e;getDescontosCatalogo(),1!=isFields||$("#ndkcsfields-block").length<1||(initPriceVars(),$.isEmptyObject(reduc_Array)?ps_version:reduc_Array.reduction_type,$("#quantity_wanted").change(function(){var e;1.6<ps_version&&void 0!==(e=$("#product-details").data("product"))&&(attrStock=ndkcfAttrStock||e.quantity,parseFloat(attrStock)<$(this).val()&&0==parseInt(e.allow_oosp)?(""!=e.available_later&&(out_of_stock_text=e.available_later),$(".ndkcsfields-block").fadeOut(600),$("#product-availability").fadeIn().text(out_of_stock_text).find("i").removeClass("product-available").addClass("product-unavailable")):(""!=e.available_now&&(in_stock_text=e.available_now),$(".ndkcsfields-block").fadeIn(600),$("#product-availability").fadeIn().text(in_stock_text).find("i").removeClass("product-unavailable").addClass("product-available")))}),e=new HoverWatcher("#ndkcf_recap"),$("#ndkcf_recap").hover(function(){$("#ndkcf_recap > .ndkcf_recap_content").stop(!0,!0).slideDown("slow")},function(){setTimeout(function(){e.isHoveringOver()||$("#ndkcf_recap > .ndkcf_recap_content").stop(!0,!0).slideUp("slow")},6e3)}))}),$(document).on("change",".ndkcfLoaded #quantity_wanted, input#idCombination",function(){update_price_dynamic(0)}),$(document).on("touchspin.stopspin","#quantity_wanted",function(){update_price_dynamic(0)}),$(document).on("blur",".recipient-field",function(){setRecapRecipient()});